{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@v17development/flarum-blog/./node_modules/@babel/runtime/regenerator/index.js","webpack://@v17development/flarum-blog/./node_modules/regenerator-runtime/runtime.js","webpack://@v17development/flarum-blog/external assign \"flarum.extensions['fof-upload']\"","webpack://@v17development/flarum-blog/webpack/bootstrap","webpack://@v17development/flarum-blog/webpack/runtime/compat get default export","webpack://@v17development/flarum-blog/webpack/runtime/define property getters","webpack://@v17development/flarum-blog/webpack/runtime/hasOwnProperty shorthand","webpack://@v17development/flarum-blog/webpack/runtime/make namespace object","webpack://@v17development/flarum-blog/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@v17development/flarum-blog/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/components/Page']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['components/IndexPage']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['forum/components/PostStream']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['forum/states/PostStreamState']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/Component']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['tags/components/TagDiscussionModal']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/components/Button']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@v17development/flarum-blog/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['forum/app']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@v17development/flarum-blog/./src/forum/components/Modals/BlogPostSettingsModal.js","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['forum/components/EditPostComposer']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@v17development/flarum-blog/./src/forum/components/Modals/RenameArticleModal.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogPostController.js","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/components/Link']\"","webpack://@v17development/flarum-blog/./src/forum/components/BlogItemSidebar/BlogAuthor.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogCategories.js","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/components/SelectDropdown']\"","webpack://@v17development/flarum-blog/./src/forum/components/ForumNav.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogItemSidebar/BlogItemSidebar.js","webpack://@v17development/flarum-blog/./src/forum/components/LanguageDropdown/Language.js","webpack://@v17development/flarum-blog/./src/forum/components/LanguageDropdown/LanguageDropdown.js","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@v17development/flarum-blog/./src/forum/components/BlogOverviewItem.tsx","webpack://@v17development/flarum-blog/./src/forum/components/FeaturedBlogItem.tsx","webpack://@v17development/flarum-blog/./src/forum/pages/BlogOverview.js","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/helpers/fullTime']\"","webpack://@v17development/flarum-blog/./src/forum/components/ArticleSubscription.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogItem.js","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/Model']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['tags/models/Tag']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/extend']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/utils/mixin']\"","webpack://@v17development/flarum-blog/./src/common/Models/BlogMeta.js","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['tags/components/TagsPage']\"","webpack://@v17development/flarum-blog/./src/forum/utils/extendTagOverview.js","webpack://@v17development/flarum-blog/./src/forum/utils/discussionRouting.js","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['forum/components/ComposerBody']\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/components/TextEditor']\"","webpack://@v17development/flarum-blog/./src/forum/components/Composer/ComposerPreview.js","webpack://@v17development/flarum-blog/./src/forum/components/Composer/Composer.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogComposer.js","webpack://@v17development/flarum-blog/external assign \"flarum.core\"","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@v17development/flarum-blog/./src/forum/utils/addSidebarNav.js","webpack://@v17development/flarum-blog/./src/forum/states/OverrideModalState.ts","webpack://@v17development/flarum-blog/external root \"flarum.core.compat['forum/components/ModalManager']\"","webpack://@v17development/flarum-blog/./src/forum/index.js","webpack://@v17development/flarum-blog/./src/forum/utils/redirector.js","webpack://@v17development/flarum-blog/./src/forum/utils/overrideModalManager.js","webpack://@v17development/flarum-blog/./src/forum/compat.js"],"sourcesContent":["module.exports = require(\"regenerator-runtime\");\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","module.exports = flarum.extensions['fof-upload'];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/PostStream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/states/PostStreamState'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/components/TagDiscussionModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/DiscussionControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Alert'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Dropdown'];","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","import app from \"flarum/forum/app\";\nimport Modal from \"flarum/common/components/Modal\";\nimport Button from \"flarum/common/components/Button\";\nimport ItemList from \"flarum/common/utils/ItemList\";\nimport Stream from \"flarum/common/utils/Stream\";\nimport Switch from \"flarum/common/components/Switch\";\nimport selectFiles from \"../../utils/selectFiles\";\n\nexport default class BlogPostSettingsModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    if (this.attrs.article) {\n      this.meta =\n        this.attrs.article && this.attrs.article.blogMeta()\n          ? this.attrs.article.blogMeta()\n          : app.store.createRecord(\"blogMeta\");\n    } else {\n      this.meta = this.attrs.meta\n        ? this.attrs.meta\n        : app.store.createRecord(\"blogMeta\");\n    }\n\n    this.isNew = !this.meta.exists;\n\n    this.summary = Stream(this.meta.summary() || \"\");\n\n    this.featuredImage = Stream(this.meta.featuredImage() || \"\");\n\n    this.isFeatured = Stream(this.meta.isFeatured() || false);\n    this.isSized = Stream(this.meta.isSized() || false);\n    this.isPendingReview = Stream(this.meta.isPendingReview() || false);\n  }\n\n  className() {\n    return \"Modal--small Support-Modal\";\n  }\n\n  title() {\n    return \"Blog post settings\";\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form\">{this.fields().toArray()}</div>\n      </div>\n    );\n  }\n\n  fields() {\n    const items = new ItemList();\n\n    items.add(\n      \"summary\",\n      <div className=\"Form-group\">\n        <label>Article summary:</label>\n        <textarea\n          className=\"FormControl\"\n          style={{\n            maxWidth: \"100%\",\n            minWidth: \"100%\",\n            width: \"100%\",\n            minHeight: \"120px\",\n          }}\n          bidi={this.summary}\n          placeholder={\"Please enter a summary\"}\n        />\n\n        <small>\n          This summary will be visible on the blog overview page and will be\n          used for SEO purposes.\n        </small>\n      </div>,\n      30\n    );\n\n    let fofUploadButton = null;\n\n    if (\n      \"fof-upload\" in flarum.extensions &&\n      app.forum.attribute(\"fof-upload.canUpload\")\n    ) {\n      const {\n        components: { Uploader, FileManagerModal },\n      } = require(\"@fof-upload\");\n\n      const uploader = new Uploader();\n\n      fofUploadButton = (\n        <Button\n          class=\"Button Button--icon\"\n          onclick={async () => {\n            app.modal.show(\n              FileManagerModal,\n              {\n                uploader: uploader,\n                onSelect: (files) => {\n                  const file = app.store.getById(\"files\", files[0]);\n\n                  this.featuredImage(file.url());\n                },\n              },\n              true\n            );\n          }}\n          icon=\"fas fa-cloud-upload-alt\"\n        />\n      );\n    }\n\n    items.add(\n      \"image\",\n      <div className=\"Form-group V17Blog-ArticleImage\">\n        <label>Article image URL:</label>\n        <div data-upload-enabled={!!fofUploadButton}>\n          <input\n            type=\"text\"\n            className=\"FormControl\"\n            bidi={this.featuredImage}\n            placeholder=\"https://\"\n          />\n          {fofUploadButton}\n        </div>\n\n        <small>Best image resolution for social media: 1200x630</small>\n\n        {this.featuredImage() !== \"\" && (\n          <img\n            src={this.featuredImage()}\n            alt=\"Article image\"\n            title=\"Blog post image\"\n            style={{ width: \"100%\", marginTop: \"15px\" }}\n          />\n        )}\n      </div>,\n      30\n    );\n\n    items.add(\n      \"sized\",\n      <div className=\"Form-group\">\n        {Switch.component(\n          {\n            state: this.isSized() == true,\n            onchange: (val) => {\n              this.isSized(val);\n            },\n          },\n          [\n            <b>Highlighted post</b>,\n            <div className=\"helpText\" style={{ fontWeight: 500 }}>\n              Give this post a big image on the blog overview page.\n            </div>,\n          ]\n        )}\n      </div>,\n      -10\n    );\n\n    items.add(\n      \"submit\",\n      <div className=\"Form-group\">\n        {Button.component(\n          {\n            type: \"submit\",\n            className: \"Button Button--primary SupportModal-save\",\n            loading: this.loading,\n          },\n          \"Update\"\n        )}\n      </div>,\n      -10\n    );\n\n    return items;\n  }\n\n  submitData() {\n    return {\n      summary: this.summary(),\n      featuredImage: this.featuredImage(),\n      isFeatured: this.isFeatured(),\n      isSized: this.isSized(),\n      isPendingReview: this.isPendingReview(),\n      relationships:\n        this.isNew && !this.attrs.isComposer\n          ? {\n              discussion: this.attrs.article,\n            }\n          : null,\n    };\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    // Submit data\n    if (this.attrs.onsubmit) {\n      // Update attributes\n      this.meta.pushData({\n        attributes: this.submitData(),\n      });\n\n      // Push\n      this.attrs.onsubmit(this.meta);\n\n      this.hide();\n      return;\n    }\n\n    this.loading = true;\n\n    this.meta.save(this.submitData()).then(\n      () => {\n        if (this.attrs.article) {\n          this.attrs.article.pushData({\n            relationships: {\n              blogMeta: this.meta,\n            },\n          });\n        }\n\n        this.hide();\n        m.redraw();\n      },\n      (response) => {\n        this.loading = false;\n        this.handleErrors(response);\n      }\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/EditPostComposer'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","import Modal from \"flarum/common/components/Modal\";\nimport Button from \"flarum/common/components/Button\";\nimport ItemList from \"flarum/common/utils/ItemList\";\nimport Stream from \"flarum/common/utils/Stream\";\n\nexport default class RenameArticleModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.article = this.attrs.article;\n\n    this.name = Stream(this.article.title() || \"\");\n\n    this.redirect = this.attrs.redirect;\n  }\n\n  className() {\n    return \"Modal--small Support-Modal\";\n  }\n\n  title() {\n    return app.translator.trans(\n      \"v17development-flarum-blog.forum.tools.rename_article\"\n    );\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form\">{this.fields().toArray()}</div>\n      </div>\n    );\n  }\n\n  fields() {\n    const items = new ItemList();\n\n    items.add(\n      \"name\",\n      <div className=\"Form-group\">\n        <label>\n          {app.translator.trans(\n            \"v17development-flarum-blog.forum.article.title\"\n          )}\n          :\n        </label>\n        <input\n          className=\"FormControl\"\n          placeholder={app.translator.trans(\n            \"v17development-flarum-blog.forum.article.title\"\n          )}\n          bidi={this.name}\n        />\n      </div>,\n      50\n    );\n\n    items.add(\n      \"submit\",\n      <div className=\"Form-group\">\n        {Button.component(\n          {\n            type: \"submit\",\n            className: \"Button Button--primary SupportModal-save\",\n            loading: this.loading,\n          },\n          \"Update\"\n        )}\n      </div>,\n      -10\n    );\n\n    return items;\n  }\n\n  submitData() {\n    return {\n      title: this.name(),\n    };\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n\n    // Do not save\n    if (this.attrs.onChange) {\n      this.attrs.onChange(this.name());\n      this.hide();\n\n      return;\n    }\n\n    this.article\n      .save({\n        title: this.name(),\n      })\n      .then(\n        () => {\n          this.hide();\n\n          // Redirect\n          if (this.redirect) {\n            const url = `/blog/${this.article.slug()}`;\n\n            m.route.set(url, true);\n            window.history.replaceState(null, document.title, url);\n          }\n        },\n        (response) => {\n          this.loading = false;\n          this.handleErrors(response);\n        }\n      );\n  }\n}\n","import Component from \"flarum/common/Component\";\nimport TagDiscussionModal from \"flarum/tags/components/TagDiscussionModal\";\nimport DiscussionControls from \"flarum/forum/utils/DiscussionControls\";\nimport Alert from \"flarum/common/components/Alert\";\nimport Button from \"flarum/common/components/Button\";\nimport Dropdown from \"flarum/common/components/Dropdown\";\nimport BlogPostSettingsModal from \"./Modals/BlogPostSettingsModal\";\nimport EditPostComposer from \"flarum/forum/components/EditPostComposer\";\nimport extractText from \"flarum/common/utils/extractText\";\nimport ItemList from \"flarum/common/utils/ItemList\";\nimport RenameArticleModal from \"./Modals/RenameArticleModal\";\nimport app from \"flarum/forum/app\";\n\nexport default class BlogPostController extends Component {\n  init() {\n    this.loadedPost = false;\n  }\n\n  manageArticleButtons() {\n    const article = this.attrs.article;\n    const items = new ItemList();\n\n    // Working for GlowingBlue version\n    const LanguageDiscussionModal =\n      flarum.extensions[\"fof-discussion-language\"] &&\n      typeof flarum.extensions[\"fof-discussion-language\"].components !==\n        \"undefined\"\n        ? flarum.extensions[\"fof-discussion-language\"].components\n            .LanguageDiscussionModal\n        : null;\n\n    // Rename article\n    if (article.canRename()) {\n      items.add(\n        \"rename\",\n        Button.component(\n          {\n            className: \"Button\",\n            onclick: () => app.modal.show(RenameArticleModal, { article }),\n            icon: \"fas fa-pencil-alt\",\n          },\n          app.translator.trans(\n            \"v17development-flarum-blog.forum.tools.rename_article\"\n          )\n        ),\n        100\n      );\n    }\n\n    const articlePost = article.firstPost();\n\n    // Edit article\n    items.add(\n      \"edit\",\n      Button.component(\n        {\n          className: \"Button\",\n          disabled: !articlePost || !articlePost.canEdit(),\n          onclick: () => {\n            app.composer.load(EditPostComposer, { post: articlePost });\n            app.composer.show();\n          },\n          icon: \"fas fa-edit\",\n        },\n        app.translator.trans(\n          \"v17development-flarum-blog.forum.tools.edit_article\"\n        )\n      ),\n      90\n    );\n\n    // Article settings\n    items.add(\n      \"articleSettings\",\n      Button.component(\n        {\n          className: \"Button\",\n          onclick: () => app.modal.show(BlogPostSettingsModal, { article }),\n          icon: \"fas fa-cogs\",\n        },\n        app.translator.trans(\n          \"v17development-flarum-blog.forum.tools.article_settings\"\n        )\n      ),\n      80\n    );\n\n    // Update categories\n    if (article.canTag()) {\n      items.add(\n        \"tag\",\n        Button.component(\n          {\n            className: \"Button\",\n            onclick: () =>\n              app.modal.show(TagDiscussionModal, { discussion: article }),\n            icon: \"fas fa-tag\",\n          },\n          app.translator.trans(\n            \"v17development-flarum-blog.forum.tools.update_category\"\n          )\n        ),\n        70\n      );\n    }\n\n    // Approve article\n    if (article.blogMeta() && article.blogMeta().isPendingReview()) {\n      items.add(\"separator1\", <li className=\"Dropdown-separator\" />, 65);\n\n      items.add(\n        \"approve\",\n        Button.component(\n          {\n            className: \"Button\",\n            disabled: !app.forum.attribute(\"canApproveBlogPosts\"),\n            onclick: () => {\n              article\n                .blogMeta()\n                .save({\n                  isPendingReview: false,\n                })\n                .then(\n                  () => {\n                    app.alerts.show(\n                      Alert,\n                      { type: \"success\" },\n                      app.translator.trans(\n                        \"v17development-flarum-blog.forum.review_article.approve_article_approved\"\n                      )\n                    );\n                  },\n                  (response) => {\n                    this.loading = false;\n                    this.handleErrors(response);\n                  }\n                );\n            },\n            icon: \"fas fa-thumbs-up\",\n          },\n          app.translator.trans(\n            \"v17development-flarum-blog.forum.review_article.approve_article\"\n          )\n        ),\n        60\n      );\n    }\n\n    // Language\n    if (\n      article.canChangeLanguage &&\n      article.canChangeLanguage() &&\n      LanguageDiscussionModal\n    ) {\n      items.add(\n        \"lang\",\n        Button.component(\n          {\n            icon: \"fas fa-globe\",\n            onclick: () =>\n              app.modal.show(LanguageDiscussionModal, { discussion: article }),\n          },\n          app.translator.trans(\n            \"fof-discussion-language.forum.discussion_controls.change_language_button\"\n          )\n        ),\n        50\n      );\n    }\n\n    items.add(\"separator2\", <li className=\"Dropdown-separator\" />, 40);\n\n    // Lock article\n    if (article.canLock()) {\n      items.add(\n        \"lock\",\n        Button.component(\n          {\n            className: \"Button\",\n            onclick: DiscussionControls.lockAction.bind(article),\n            icon: `fas ${\n              article.isLocked() ? \"fa-comments\" : \"fa-comment-slash\"\n            }`,\n          },\n          article.isLocked()\n            ? app.translator.trans(\n                \"v17development-flarum-blog.forum.tools.enable_comments\"\n              )\n            : app.translator.trans(\n                \"v17development-flarum-blog.forum.tools.disable_comments\"\n              )\n        ),\n        30\n      );\n    }\n\n    // Hide/show/delete\n    if (article.canHide()) {\n      // Article is hidden\n      if (article.isHidden()) {\n        // Recover article\n        items.add(\n          \"recover\",\n          Button.component(\n            {\n              className: \"Button\",\n              onclick: DiscussionControls.restoreAction.bind(article),\n              icon: \"fas fa-eye\",\n            },\n            app.translator.trans(\n              \"v17development-flarum-blog.forum.tools.recover_article\"\n            )\n          ),\n          20\n        );\n\n        // Delete article\n        if (article.canDelete()) {\n          buttons.add(\n            \"delete\",\n            Button.component(\n              {\n                className: \"Button\",\n                onclick: () => {\n                  // Confirm deletion\n                  if (\n                    confirm(\n                      extractText(\n                        app.translator.trans(\n                          \"core.forum.discussion_controls.delete_confirmation\"\n                        )\n                      )\n                    )\n                  ) {\n                    // Redirect if the current page is an blog article\n                    if (app.history.getCurrent().name === \"blogArticle\") {\n                      if (app.previous) {\n                        app.history.back();\n                      } else {\n                        m.route.set(app.route(\"blog\"));\n                      }\n                    }\n\n                    return article.delete().then(() => {\n                      m.redraw();\n                    });\n                  }\n                },\n                icon: \"far fa-trash-alt\",\n              },\n              app.translator.trans(\n                \"v17development-flarum-blog.forum.tools.delete_forever\"\n              )\n            ),\n            10\n          );\n        }\n      } else {\n        // Hide article\n        items.add(\n          \"hide\",\n          Button.component(\n            {\n              className: \"Button\",\n              onclick: DiscussionControls.hideAction.bind(article),\n              icon: \"fas fa-eye-slash\",\n            },\n            app.translator.trans(\n              \"v17development-flarum-blog.forum.tools.hide_article\"\n            )\n          ),\n          0\n        );\n      }\n    }\n\n    return items;\n  }\n\n  view() {\n    const article = this.attrs.article;\n\n    const articlePost = article.firstPost();\n\n    return (\n      <div className={\"FlarumBlog-Article-Content-Edit-Button\"}>\n        <div className={\"FlarumBlog-Article-Content-Edit-Dropdown\"}>\n          {Dropdown.component(\n            {\n              icon: \"fas fa-cog\",\n              label: \"Manage\",\n              buttonClassName: \"Button\",\n              menuClassName: \"Dropdown-menu--right\",\n              onshow: () => {\n                // Get post data to make sure they can edit the post\n                if (articlePost && !articlePost.canEdit() && !this.loadedPost) {\n                  this.loadedPost = true;\n                  m.redraw();\n                }\n              },\n            },\n            this.manageArticleButtons().toArray()\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","import Component from \"flarum/common/Component\";\nimport ItemList from \"flarum/common/utils/ItemList\";\nimport listItems from \"flarum/common/helpers/listItems\";\nimport avatar from \"flarum/common/helpers/avatar\";\nimport Link from \"flarum/common/components/Link\";\n\nexport default class BlogAuthor extends Component {\n  view() {\n    const author = !this.attrs.loading\n      ? this.attrs.article\n        ? this.attrs.article.user()\n        : this.attrs.user\n      : null;\n\n    return (\n      <div className={\"FlarumBlog-Article-Author\"}>\n        <div\n          className={`FlarumBlog-Article-Author-background ${\n            this.attrs.loading ? \"FlarumBlog-Author-Ghost\" : \"\"\n          }`}\n          style={{\n            backgroundColor: author && author.color() ? author.color() : null,\n          }}\n        />\n\n        <div className={\"FlarumBlog-Article-Author-Avatar\"}>\n          {author ? (\n            <Link href={app.route(\"user\", { username: author.username() })}>\n              {avatar(author)}\n            </Link>\n          ) : (\n            <span className={\"Avatar FlarumBlog-Author-Ghost\"} />\n          )}\n        </div>\n\n        {author && (\n          <div className={\"FlarumBlog-Article-Author-Info\"}>\n            <Link\n              href={app.route(\"user\", { username: author.username() })}\n              className={\"FlarumBlog-Article-Author-Name\"}\n            >\n              {author.displayName()}\n            </Link>\n            <p className={\"FlarumBlog-Article-Author-Bio\"}>\n              {author.bio && author.bio()}\n            </p>\n\n            <ul className={\"FlarumBlog-Article-Author-Extended\"}>\n              {listItems(this.items().toArray())}\n            </ul>\n          </div>\n        )}\n\n        {this.attrs.loading && (\n          <div>\n            <span\n              className={\n                \"FlarumBlog-Article-Author-Name FlarumBlog-Author-Ghost\"\n              }\n            >\n              &nbsp;\n            </span>\n            <p\n              className={\n                \"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"\n              }\n            >\n              &nbsp;\n            </p>\n            <p\n              className={\n                \"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"\n              }\n            >\n              &nbsp;\n            </p>\n            <p\n              className={\n                \"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"\n              }\n            >\n              &nbsp;\n            </p>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  items() {\n    return new ItemList();\n  }\n}\n","import Component from \"flarum/common/Component\";\nimport Link from \"flarum/common/components/Link\";\n\nexport default class BlogCategories extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.blogCategories = app.forum.attribute(\"blogTags\");\n  }\n\n  view() {\n    return (\n      <div className=\"BlogCategories BlogSideWidget\">\n        <h3>\n          {app.translator.trans(\"v17development-flarum-blog.forum.categories\")}\n        </h3>\n\n        {this.blogCategories &&\n          this.blogCategories.map((tagId) => {\n            const tag = app.store.getById(\"tags\", tagId);\n\n            if (!tag) return null;\n\n            const tags = [];\n            let showSubTags =\n              this.blogCategories.length === 1 ||\n              tag.slug() === m.route.param(\"slug\");\n\n            // Add tags\n            app.store.all(\"tags\").forEach((_tag) => {\n              if (_tag.isChild() && _tag.parent() === tag) {\n                if (_tag.slug() === m.route.param(\"slug\")) {\n                  showSubTags = true;\n                }\n\n                tags.push(this.categoryItem(_tag));\n              }\n            });\n\n            return showSubTags\n              ? [this.categoryItem(tag), ...tags]\n              : this.categoryItem(tag);\n          })}\n      </div>\n    );\n  }\n\n  // Category item\n  categoryItem(tag) {\n    return (\n      <Link\n        href={app.route(\"blogCategory\", { slug: tag.slug() })}\n        className={`BlogSideWidget-item BlogSideWidget-item-${tag.id()} ${\n          tag.isChild() && app.forum.attribute(\"blogCategoryHierarchy\") == true\n            ? \"BlogSideWidget-item-child\"\n            : \"\"\n        }`}\n      >\n        <span\n          className={tag.icon() === \"\" ? \"BlogSideWidget-item-colored\" : \"\"}\n          style={{ backgroundColor: tag.icon() === \"\" ? tag.color() : null }}\n        >\n          <i className={tag.icon()} />\n        </span>\n        {tag.name()}\n      </Link>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/SelectDropdown'];","import Component from \"flarum/common/Component\";\nimport IndexPage from \"flarum/forum/components/IndexPage\";\nimport SelectDropdown from \"flarum/common/components/SelectDropdown\";\n\nexport default class ForumNav extends Component {\n  view() {\n    return (\n      <div className=\"BlogForumNav BlogSideWidget\">\n        <h3>\n          {app.translator.trans(\"v17development-flarum-blog.forum.forum_nav\")}\n        </h3>\n        <nav className=\"IndexPage-nav sideNav\">\n          <SelectDropdown buttonClassName=\"Button\" className=\"App-titleControl\">\n            {this.navItems().toArray()}\n          </SelectDropdown>\n        </nav>\n      </div>\n    );\n  }\n\n  navItems() {\n    return IndexPage.prototype.navItems();\n  }\n}\n","import Component from \"flarum/common/Component\";\nimport ItemList from \"flarum/common/utils/ItemList\";\nimport listItems from \"flarum/common/helpers/listItems\";\nimport BlogAuthor from \"./BlogAuthor\";\nimport BlogCategories from \"../BlogCategories\";\nimport ForumNav from \"../ForumNav\";\n\nexport default class BlogItemSidebar extends Component {\n  view() {\n    return (\n      <div className={\"FlarumBlog-Article-Sidebar\"}>\n        <ul>{listItems(this.items().toArray())}</ul>\n      </div>\n    );\n  }\n\n  items() {\n    const itemlist = new ItemList();\n\n    itemlist.add(\"author\", BlogAuthor.component(this.attrs), 0);\n\n    itemlist.add(\"categories\", BlogCategories.component(this.attrs), 0);\n\n    itemlist.add(\"nav\", ForumNav.component(this.attrs), 0);\n\n    return itemlist;\n  }\n}\n","import Component from \"flarum/common/Component\";\n\nexport default class Language extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.languages = app.store.all(\"discussion-languages\");\n    this.options = this.languages.reduce((o, lang) => {\n      o[lang.code()] = (\n        <span>\n          <i className={\"fas fa-globe\"} /> {lang.name()}\n        </span>\n      );\n\n      return o;\n    }, this.attrs.extra || {});\n  }\n\n  view() {\n    const { language, uppercase } = this.attrs;\n    const name = language.name() || \"\";\n\n    return (\n      <span>\n        <i className={\"fas fa-globe\"} />\n        &nbsp;\n        {uppercase ? name.toUpperCase() : name}\n      </span>\n    );\n  }\n}\n","import Component from \"flarum/common/Component\";\nimport Dropdown from \"flarum/common/components/Dropdown\";\nimport Button from \"flarum/common/components/Button\";\nimport Language from \"./Language\";\n\nexport default class LanguageDropdown extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.languages = app.store.all(\"discussion-languages\");\n    this.options = this.languages.reduce((o, lang) => {\n      o[lang.code()] = <Language language={lang} />;\n\n      return o;\n    }, this.attrs.extra || {});\n  }\n\n  view() {\n    const selected = this.attrs.selected;\n\n    return Dropdown.component(\n      {\n        buttonClassName: \"Button\",\n        label: this.options[selected] || this.options[this.attrs.default],\n      },\n      Object.keys(this.options).map((key) => {\n        let defaultSelected;\n        if (\n          app.forum.attribute(\"fof-discussion-language.composerLocaleDefault\")\n        ) {\n          defaultSelected = \"any\";\n        } else {\n          defaultSelected = app.translator.formatter.locale;\n        }\n        const isSelected = selected || defaultSelected;\n        const active = key === isSelected;\n\n        return Button.component(\n          {\n            active,\n            icon: active ? \"fas fa-check\" : true,\n            onclick: () => this.attrs.onclick(key),\n          },\n          this.options[key]\n        );\n      })\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","import Component from \"flarum/common/Component\";\nimport Link from \"flarum/common/components/Link\";\nimport Tooltip from \"flarum/common/components/Tooltip\";\nimport humanTime from \"flarum/common/helpers/humanTime\";\nimport icon from \"flarum/common/helpers/icon\";\nimport Discussion from \"flarum/common/models/Discussion\";\nimport classList from \"flarum/common/utils/classList\";\nimport ItemList from \"flarum/common/utils/ItemList\";\nimport app from \"flarum/forum/app\";\nimport type Mithril from \"mithril\";\n\ninterface Attrs {\n  article: Discussion;\n  defaultImage: string;\n}\n\nexport default class BlogOverviewItem extends Component<Attrs> {\n  titleItems(): ItemList<Mithril.Children> {\n    const { article } = this.attrs;\n\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\"title\", <>{article.title()}</>, 100);\n\n    if (article.blogMeta()?.isPendingReview?.() || article.isHidden()) {\n      items.add(\n        \"hidden\",\n        icon(\"fas fa-eye-slash\", { class: \"BlogList-item-hidden\" }),\n        80\n      );\n    }\n\n    if (article.blogMeta()?.isPendingReview?.()) {\n      items.add(\n        \"pendingReview\",\n        <Tooltip\n          text={app.translator.trans(\n            \"v17development-flarum-blog.forum.review_article.pending_review\"\n          )}\n        >\n          {icon(\"far fa-clock\", { class: \"BlogList-item-pendingReview\" })}\n        </Tooltip>,\n        40\n      );\n    }\n\n    return items;\n  }\n\n  dataItems(): ItemList<Mithril.Children> {\n    const { article } = this.attrs;\n\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      \"createdAt\",\n      <span class=\"BlogList-item-details-createdAt\">\n        {icon(\"far fa-clock\")} {humanTime(article.createdAt())}\n      </span>,\n      100\n    );\n\n    items.add(\n      \"author\",\n      <span class=\"BlogList-item-details-author\">\n        {icon(\"far fa-user\")}{\" \"}\n        {article.user()?.displayName?.() ||\n          app.translator.trans(\"core.lib.username.deleted_text\")}\n      </span>,\n      80\n    );\n\n    items.add(\n      \"replies\",\n      <span class=\"BlogList-item-details-replies\">\n        {icon(\"far fa-comment\")} {(article.commentCount() || 1) - 1}\n      </span>,\n      60\n    );\n\n    return items;\n  }\n\n  contentItems(): ItemList<Mithril.Children> {\n    const { article } = this.attrs;\n    const summary = article.blogMeta()?.summary?.() || \"\";\n\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\"title\", <h4>{this.titleItems().toArray()}</h4>, 100);\n\n    if (summary) items.add(\"summary\", <p>{summary}</p>, 80);\n\n    items.add(\"data\", <div class=\"data\">{this.dataItems().toArray()}</div>, 60);\n\n    return items;\n  }\n\n  getImage(): string {\n    const { article, defaultImage } = this.attrs;\n\n    return article.blogMeta()?.featuredImage?.()\n      ? `url(${article.blogMeta().featuredImage()})`\n      : defaultImage;\n  }\n\n  view(vnode: Mithril.Vnode<Attrs, this>) {\n    const { article, defaultImage } = this.attrs;\n\n    const blogImage = this.getImage();\n\n    const isSized = article.blogMeta()?.isSized?.();\n\n    return (\n      <Link\n        href={app.route(\"blogArticle\", {\n          id: `${article.slug()}`,\n        })}\n        className={classList(\n          \"BlogList-item\",\n          {\n            \"BlogList-item-sized\": isSized,\n            \"BlogList-item-default\": !isSized,\n          },\n          article.tags().map((tag) => `BlogList-item-category-${tag.id()}`)\n        )}\n      >\n        <div\n          class={classList(\"BlogList-item-photo\", {\n            \"FlarumBlog-default-image\": blogImage === defaultImage,\n          })}\n          style={{ backgroundImage: blogImage }}\n        />\n\n        <div class=\"BlogList-item-content\">{this.contentItems().toArray()}</div>\n      </Link>\n    );\n  }\n}\n","import Component from \"flarum/common/Component\";\nimport Link from \"flarum/common/components/Link\";\nimport Tooltip from \"flarum/common/components/Tooltip\";\nimport humanTime from \"flarum/common/helpers/humanTime\";\nimport icon from \"flarum/common/helpers/icon\";\nimport Discussion from \"flarum/common/models/Discussion\";\nimport ItemList from \"flarum/common/utils/ItemList\";\nimport classList from \"flarum/common/utils/classList\";\nimport app from \"flarum/forum/app\";\nimport type Mithril from \"mithril\";\n\ninterface Attrs {\n  article: Discussion;\n  defaultImage: string;\n}\n\nexport default class FeaturedBlogItem extends Component<Attrs> {\n  topItems(): ItemList<Mithril.Children> {\n    const { article } = this.attrs;\n\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      \"tags\",\n      <span class=\"BlogFeatured-list-item-tags\">\n        {article.tags()?.map((tag) => (\n          <span class=\"dataItem\">{tag.name()}</span>\n        ))}\n      </span>,\n      100\n    );\n\n    if (article.isSticky()) {\n      items.add(\n        \"sticky\",\n        <span class=\"BlogFeatured-list-item-isSticky dataItem\">\n          {icon(\"fas fa-thumbtack\")}\n        </span>,\n        80\n      );\n    }\n\n    if (article.blogMeta()?.isPendingReview?.() || article.isHidden()) {\n      items.add(\n        \"hidden\",\n        <span class=\"BlogFeatured-list-item-isHidden dataItem\">\n          {icon(\"fas fa-eye-slash\")}\n        </span>,\n        60\n      );\n    }\n\n    if (article.blogMeta()?.isPendingReview?.()) {\n      items.add(\n        \"pendingReview\",\n        <Tooltip\n          text={app.translator.trans(\n            \"v17development-flarum-blog.forum.review_article.pending_review\"\n          )}\n          position=\"bottom\"\n        >\n          <span class=\"BlogFeatured-list-item-pendingReview dataItem\">\n            {icon(\"far fa-clock\")}{\" \"}\n            {app.translator.trans(\n              \"v17development-flarum-blog.forum.review_article.pending_review_title\"\n            )}\n          </span>\n        </Tooltip>,\n        40\n      );\n    }\n\n    return items;\n  }\n\n  dataItems(): ItemList<Mithril.Children> {\n    const { article } = this.attrs;\n\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      \"createdAt\",\n      <span class=\"BlogFeatured-list-item-details-createdAt\">\n        {icon(\"far fa-clock\")} {humanTime(article.createdAt())}\n      </span>,\n      100\n    );\n\n    items.add(\n      \"author\",\n      <span class=\"BlogFeatured-list-item-details-author\">\n        {icon(\"far fa-user\")}{\" \"}\n        {article.user()?.displayName() ||\n          app.translator.trans(\"core.lib.username.deleted_text\")}\n      </span>,\n      80\n    );\n\n    items.add(\n      \"replies\",\n      <span class=\"BlogFeatured-list-item-details-replies\">\n        {icon(\"far fa-comment\")} {article.commentCount() - 1}\n      </span>,\n      60\n    );\n\n    return items;\n  }\n\n  view(vnode: Mithril.Vnode<Attrs, this>) {\n    const { article, defaultImage } = this.attrs;\n\n    const blogImage = article.blogMeta()?.featuredImage?.()\n      ? `url(${article.blogMeta().featuredImage()})`\n      : defaultImage;\n\n    return (\n      <Link\n        href={app.route(\"blogArticle\", {\n          id: `${article.slug()}`,\n        })}\n        className={classList(\n          \"BlogFeatured-list-item\",\n          article\n            .tags()\n            .map((tag) => `BlogFeatured-list-item-category-${tag.id()}`),\n          \"FlarumBlog-default-image\"\n        )}\n        style={{ backgroundImage: blogImage }}\n      >\n        <div class=\"BlogFeatured-list-item-top\">\n          {this.topItems().toArray()}\n        </div>\n\n        <div className={\"BlogFeatured-list-item-details\"}>\n          <h4>{article.title()}</h4>\n\n          <div className={\"data\"}>{this.dataItems().toArray()}</div>\n        </div>\n      </Link>\n    );\n  }\n}\n","import app from \"flarum/forum/app\";\n\nimport IndexPage from \"flarum/components/IndexPage\";\nimport Page from \"flarum/common/components/Page\";\nimport Button from \"flarum/common/components/Button\";\nimport BlogCategories from \"../components/BlogCategories\";\nimport Link from \"flarum/common/components/Link\";\nimport LanguageDropdown from \"../components/LanguageDropdown/LanguageDropdown\";\nimport ForumNav from \"../components/ForumNav\";\nimport BlogOverviewItem from \"../components/BlogOverviewItem\";\nimport FeaturedBlogItem from \"../components/FeaturedBlogItem\";\n\nexport default class BlogOverview extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.setTitle(app.translator.trans(\"v17development-flarum-blog.forum.blog\"));\n\n    this.bodyClass = \"BlogOverviewPage\";\n\n    this.isLoading = true;\n    this.featuredPosts = [];\n    this.posts = [];\n    this.hasMore = null;\n    this.isLoadingMore = false;\n\n    this.languages = app.store.all(\"discussion-languages\");\n\n    this.currentSelectedLanguage = m.route.param(\"lang\")\n      ? m.route.param(\"lang\")\n      : app.translator.formatter.locale;\n\n    // Send history push\n    app.history.push(\"blog\");\n\n    this.loadBlogOverview();\n\n    this.featuredCount = parseInt(app.forum.attribute(\"blogFeaturedCount\"));\n\n    this.showCategories = true;\n    this.showForumNav = true;\n  }\n\n  // Load blog overview\n  loadBlogOverview() {\n    const preloadBlogOverview = app.preloadedApiDocument();\n\n    if (preloadBlogOverview) {\n      // We must wrap this in a setTimeout because if we are mounting this\n      // component for the first time on page load, then any calls to m.redraw\n      // will be ineffective and thus any configs (scroll code) will be run\n      // before stuff is drawn to the page.\n      setTimeout(this.show.bind(this, preloadBlogOverview), 0);\n    } else {\n      this.reloadData();\n    }\n\n    m.redraw();\n  }\n\n  reloadData() {\n    let q = `is:blog${\n      m.route.param(\"slug\") ? ` tag:${m.route.param(\"slug\")}` : \"\"\n    }`;\n\n    if (this.languages !== null && this.languages.length >= 1) {\n      q += ` language:${this.currentSelectedLanguage}`;\n    }\n\n    app.store\n      .find(\"discussions\", {\n        filter: {\n          q,\n        },\n        sort: \"-createdAt\",\n      })\n      .then(this.show.bind(this))\n      .catch(() => {\n        m.redraw();\n      });\n  }\n\n  // Show blog posts\n  show(articles) {\n    if (articles.length === 0) {\n      this.isLoading = false;\n      m.redraw();\n\n      return;\n    }\n\n    // Set pagination\n    this.hasMore =\n      articles.payload.links && articles.payload.links.next\n        ? articles.payload.links.next\n        : null;\n\n    this.featuredPosts = articles.slice(0, this.featuredCount);\n    this.posts =\n      articles.length > this.featuredCount\n        ? articles.slice(this.featuredCount, articles.length)\n        : [];\n\n    this.isLoading = false;\n\n    m.redraw();\n  }\n\n  // Load more blog posts\n  loadMore() {\n    this.isLoadingMore = true;\n\n    app.store\n      .find(this.hasMore.replace(app.forum.attribute(\"apiUrl\"), \"\"))\n      .then((data) => {\n        data.map((article) => this.posts.push(article));\n\n        // Update hasmore button\n        this.hasMore =\n          data.payload.links && data.payload.links.next\n            ? data.payload.links.next\n            : null;\n      })\n      .catch(() => {})\n      .then(() => {\n        this.isLoadingMore = false;\n        m.redraw();\n      });\n  }\n\n  title() {\n    if (!m.route.param(\"slug\")) {\n      return (\n        <h2>\n          {app.translator.trans(\n            \"v17development-flarum-blog.forum.recent_posts\"\n          )}\n        </h2>\n      );\n    }\n\n    const tag = app.store\n      .all(\"tags\")\n      .filter((tag) => tag.slug() === m.route.param(\"slug\"));\n\n    return (\n      <h2>\n        {tag && tag[0] && tag[0].name()}\n        <small>\n          {\" \"}\n          -{\" \"}\n          <Link href={app.route(\"blog\")}>\n            {app.translator.trans(\n              \"v17development-flarum-blog.forum.return_to_overview\"\n            )}\n          </Link>\n        </small>\n      </h2>\n    );\n  }\n\n  view() {\n    const defaultImage = app.forum.attribute(\"blogDefaultImage\")\n      ? `url(${\n          app.forum.attribute(\"baseUrl\") +\n          \"/assets/\" +\n          app.forum.attribute(\"blogDefaultImage\")\n        })`\n      : null;\n\n    return [\n      app.forum.attribute(\"blogAddHero\") == true && IndexPage.prototype.hero(),\n      <div className={\"FlarumBlogOverview\"}>\n        <div className={\"container\"}>\n          <div className={\"BlogFeatured\"}>\n            <div className={\"BlogOverviewButtons\"}>\n              {app.forum.attribute(\"canWriteBlogPosts\") && (\n                <Button\n                  className={\"Button\"}\n                  onclick={() => this.newArticle()}\n                  icon={\"fas fa-pencil-alt\"}\n                >\n                  {app.translator.trans(\n                    \"v17development-flarum-blog.forum.compose.write_article\"\n                  )}\n                </Button>\n              )}\n\n              {this.languages !== null && this.languages.length >= 1 && (\n                <LanguageDropdown\n                  selected={this.currentSelectedLanguage}\n                  onclick={(language) => {\n                    this.currentSelectedLanguage = language;\n\n                    m.route.set(document.location.pathname, {\n                      lang: language,\n                    });\n\n                    this.reloadData();\n                  }}\n                />\n              )}\n            </div>\n\n            {this.title()}\n\n            <div style={{ clear: \"both\" }} />\n\n            <div class=\"BlogFeatured-list\">\n              {/* Ghost data */}\n              {this.isLoading &&\n                [...new Array(this.featuredCount).fill(undefined)].map(() => (\n                  <div class=\"BlogFeatured-list-item BlogFeatured-list-item-ghost\">\n                    <div class=\"BlogFeatured-list-item-details\">\n                      <h4>&nbsp;</h4>\n\n                      <div class=\"data\">\n                        <span>\n                          <i class=\"far fa-wave\" />\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n\n              {!this.isLoading &&\n                this.featuredPosts.length >= 0 &&\n                this.featuredPosts.map((article) => (\n                  <FeaturedBlogItem\n                    article={article}\n                    defaultImage={defaultImage}\n                  />\n                ))}\n            </div>\n          </div>\n\n          <div className={\"BlogScrubber\"}>\n            <div className={\"BlogList\"}>\n              {this.isLoading &&\n                [false, false, true, false].map((state) => {\n                  return (\n                    <div\n                      className={`BlogList-item BlogList-item-${\n                        state === true ? \"sized\" : \"default\"\n                      } BlogList-item-ghost`}\n                    >\n                      <div\n                        className={\n                          \"BlogList-item-photo FlarumBlog-default-image\"\n                        }\n                      ></div>\n                      <div className={\"BlogList-item-content\"}>\n                        <h4>&nbsp;</h4>\n                        <p>&nbsp;</p>\n\n                        <div className={\"data\"}>\n                          <span>\n                            <i className={\"far fa-wave\"} />\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })}\n\n              {!this.isLoading &&\n                this.posts.length >= 1 &&\n                this.posts.map((article) => (\n                  <BlogOverviewItem\n                    article={article}\n                    defaultImage={defaultImage}\n                  />\n                ))}\n\n              {!this.isLoading &&\n                this.featuredPosts.length > 0 &&\n                this.hasMore === null && (\n                  <p className={\"FlarumBlog-reached-end\"}>\n                    {app.translator.trans(\n                      \"v17development-flarum-blog.forum.no_more_posts\"\n                    )}\n                  </p>\n                )}\n\n              {!this.isLoading &&\n                this.featuredPosts.length === 0 &&\n                this.posts.length === 0 && (\n                  <p className={\"FlarumBlog-reached-end\"}>\n                    {app.translator.trans(\n                      \"v17development-flarum-blog.forum.category_empty\"\n                    )}\n                  </p>\n                )}\n\n              {!this.isLoading && this.hasMore !== null && (\n                <div className={\"FlarumBlog-reached-load-more\"}>\n                  <Button\n                    className={\"Button\"}\n                    onclick={() => this.loadMore()}\n                    icon={\"fas fa-chevron-down\"}\n                    loading={this.isLoadingMore}\n                  >\n                    {app.translator.trans(\n                      \"core.forum.discussion_list.load_more_button\"\n                    )}\n                  </Button>\n                </div>\n              )}\n            </div>\n\n            <div className={\"Sidebar\"}>\n              {this.showCategories && <BlogCategories />}\n              {this.showForumNav && <ForumNav />}\n            </div>\n          </div>\n        </div>\n      </div>,\n    ];\n  }\n\n  newArticle() {\n    let tags = [];\n\n    // Get current category\n    const currentCategory = app.store.getBy(\n      \"tags\",\n      \"slug\",\n      m.route.param(\"slug\")\n    );\n\n    if (currentCategory) {\n      tags.push(currentCategory);\n    }\n\n    // Redirect to the composer\n    m.route.set(\n      app.route(\"blogComposer\", {\n        tags: tags.map((tag) => tag.id()).join(),\n        lang:\n          this.languages.length > 0 ? this.currentSelectedLanguage : undefined,\n      })\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/fullTime'];","import Component from \"flarum/common/Component\";\nimport Button from \"flarum/common/components/Button\";\nimport extractText from \"flarum/common/utils/extractText\";\nimport Tooltip from \"flarum/common/components/Tooltip\";\n\nexport default class ArticleSubscription extends Component {\n  view() {\n    const currentSubscriptionState = this.attrs.discussion.subscription();\n\n    const preferences = app.session.user.preferences();\n    const notifyEmail = preferences[\"notify_newPost_email\"];\n    const notifyTooltip = extractText(\n      app.translator.trans(\n        notifyEmail\n          ? \"flarum-subscriptions.forum.sub_controls.notify_email_tooltip\"\n          : \"flarum-subscriptions.forum.sub_controls.notify_alert_tooltip\"\n      )\n    );\n\n    let title = app.translator.trans(\n      \"flarum-subscriptions.forum.sub_controls.not_following_button\"\n    );\n    let icon = \"far fa-star\";\n\n    // Following\n    if (currentSubscriptionState === \"follow\") {\n      title = app.translator.trans(\n        \"flarum-subscriptions.forum.sub_controls.following_button\"\n      );\n      icon = \"fas fa-star\";\n    }\n\n    return (\n      <Tooltip text={notifyTooltip} position=\"bottom\">\n        <Button\n          className={`Button BlogArticleSubscription SubscriptionMenu-button--${currentSubscriptionState}`}\n          icon={icon}\n          onclick={this.saveSubscription.bind(\n            this,\n            this.attrs.discussion,\n            [\"follow\", \"ignore\"].indexOf(currentSubscriptionState) !== -1\n              ? null\n              : \"follow\"\n          )}\n        >\n          {title}\n        </Button>\n      </Tooltip>\n    );\n  }\n\n  saveSubscription(discussion, subscription) {\n    discussion.save({ subscription });\n  }\n}\n","import Page from \"flarum/common/components/Page\";\nimport IndexPage from \"flarum/components/IndexPage\";\nimport CommentPost from \"flarum/forum/components/CommentPost\";\nimport PostStream from \"flarum/forum/components/PostStream\";\nimport PostStreamState from \"flarum/forum/states/PostStreamState\";\nimport BlogPostController from \"../components/BlogPostController\";\nimport BlogItemSidebar from \"../components/BlogItemSidebar/BlogItemSidebar\";\nimport Link from \"flarum/common/components/Link\";\nimport BlogOverview from \"./BlogOverview\";\nimport fullTime from \"flarum/common/helpers/fullTime\";\nimport ArticleSubscription from \"../components/ArticleSubscription\";\nimport classList from \"flarum/common/utils/classList\";\nimport ItemList from \"flarum/common/utils/ItemList\";\nimport icon from \"flarum/common/helpers/icon\";\nimport app from \"flarum/forum/app\";\n\nexport default class BlogItem extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.setTitle(app.translator.trans(\"v17development-flarum-blog.forum.blog\"));\n\n    // Send history push\n    app.history.push(\"blogArticle\");\n\n    this.bodyClass = \"BlogItemPage\";\n\n    this.near = m.route.param(\"near\") || 0;\n\n    this.loading = true;\n    this.found = false;\n    this.article = null;\n\n    this.loadBlogItem();\n  }\n\n  // Load blog overview\n  loadBlogItem() {\n    const preloadBlogOverview = app.preloadedApiDocument();\n\n    if (preloadBlogOverview) {\n      // We must wrap this in a setTimeout because if we are mounting this\n      // component for the first time on page load, then any calls to m.redraw\n      // will be ineffective and thus any configs (scroll code) will be run\n      // before stuff is drawn to the page.\n      setTimeout(this.show.bind(this, preloadBlogOverview), 0);\n    } else {\n      app.store\n        .find(\"discussions\", m.route.param(\"id\").split(\"-\")[0])\n        .then(this.show.bind(this))\n        .catch(() => {\n          m.redraw();\n        });\n    }\n\n    m.redraw();\n  }\n\n  // Show blog post\n  show(article) {\n    // Set article data\n    this.article = article;\n\n    // Update title\n    app.setTitle(\n      `${article.title()} - ${app.translator.trans(\n        \"v17development-flarum-blog.forum.blog\"\n      )}`\n    );\n\n    this.loading = false;\n\n    let includedPosts = [];\n    if (article.payload && article.payload.included) {\n      const articleId = article.id();\n\n      includedPosts = article.payload.included\n        .filter(\n          (record) =>\n            record.type === \"posts\" &&\n            record.relationships &&\n            record.relationships.discussion &&\n            record.relationships.discussion.data.id === articleId\n        )\n        .map((record) => app.store.getById(\"posts\", record.id))\n        .sort((a, b) => a.id() - b.id())\n        .slice(0, 20);\n    }\n\n    this.stream = new PostStreamState(article, includedPosts);\n\n    // Scroll to specific post\n    if (this.near) {\n      this.stream.goToNumber(this.near || 0, true).then(() => {\n        app.current.set(\"discussion\", article);\n        app.current.set(\"stream\", this.stream);\n      });\n    }\n\n    // Read post on load\n    if (app.session.user && !article.lastReadPostNumber()) {\n      article.save({ lastReadPostNumber: 1 });\n    }\n\n    m.redraw();\n  }\n\n  postItems() {\n    let articlePost = null;\n\n    if (!this.loading && this.article) {\n      articlePost = this.article?.firstPost?.();\n    }\n\n    const items = new ItemList();\n\n    items.add(\n      \"title\",\n      <h3\n        className={classList(\"FlarumBlog-Article-Title\", {\n          \"FlarumBlog-Article-GhostTitle\": this.loading,\n        })}\n      >\n        {this?.article?.title?.() || \"Ghost title\"}\n        {this.article?.isHidden?.() &&\n          `(${app.translator.trans(\n            \"v17development-flarum-blog.forum.hidden\"\n          )})`}\n      </h3>,\n      100\n    );\n\n    items.add(\n      \"publishDate\",\n      <div\n        className={classList(\"FlarumBlog-Article-PublishDate\", {\n          \"FlarumBlog-Article-GhostPublishDate\": this.loading,\n        })}\n      >\n        {this.article ? (\n          fullTime(this.article.createdAt())\n        ) : (\n          <span>&nbsp;</span>\n        )}\n      </div>,\n      80\n    );\n\n    if (this.loading) {\n      items.add(\n        \"skeleton\",\n        [0, 1, 2].map(() => (\n          <div>\n            <p className={\"FlarumBlog-Article-GhostParagraph\"}>&nbsp;</p>\n            <p className={\"FlarumBlog-Article-GhostParagraph\"}>&nbsp;</p>\n            <p className={\"FlarumBlog-Article-GhostParagraph\"}>&nbsp;</p>\n            <p>&nbsp;</p>\n          </div>\n        )),\n        60\n      );\n    }\n\n    if (!this.loading) {\n      if (this.article.blogMeta?.()?.isPendingReview?.()) {\n        items.add(\n          \"review\",\n          <div className={\"Post-body\"}>\n            <blockquote class=\"uncited\" style={{ fontSize: \"16px\" }}>\n              <div>\n                {icon(\"far fa-clock\", { style: { marginRight: \"5px\" } })}{\" \"}\n                {app.translator.trans(\n                  \"v17development-flarum-blog.forum.review_article.pending_review\"\n                )}\n              </div>\n            </blockquote>\n          </div>,\n          60\n        );\n      }\n\n      if (articlePost) {\n        items.add(\"post\", <CommentPost post={articlePost} />, 40);\n      }\n    }\n\n    return items;\n  }\n\n  contentItems() {\n    const defaultImage = app.forum.attribute(\"blogDefaultImage\")\n      ? `url(${app.forum.attribute(\"baseUrl\")}/assets/${app.forum.attribute(\n          \"blogDefaultImage\"\n        )})`\n      : null;\n\n    const blogImage = this.article?.blogMeta()?.featuredImage?.()\n      ? `url(${this.article.blogMeta().featuredImage()})`\n      : defaultImage;\n\n    const items = new ItemList();\n\n    items.add(\n      \"image\",\n      <div\n        className={classList(\n          \"FlarumBlog-Article-Image FlarumBlog-default-image\",\n          { \"FlarumBlog-Article-GhostImage\": this.loading }\n        )}\n        style={{\n          backgroundImage: blogImage,\n          opacity: this.article?.isHidden?.() ? 0.4 : null,\n        }}\n      />,\n      100\n    );\n\n    if (\n      this.article &&\n      (app.session.user?.canEdit?.() ||\n        this.article?.canRename?.() ||\n        this.article?.posts?.()?.[0]?.canEdit?.())\n    ) {\n      items.add(\n        \"editArticle\",\n        <BlogPostController article={this.article} />,\n        80\n      );\n    }\n\n    // Article Categories\n    items.add(\n      \"categories\",\n      <div className=\"FlarumBlog-Article-Categories\">\n        {!this.loading &&\n          this.article\n            ?.tags?.()\n            ?.map((tag) => (\n              <Link href={app.route(\"blogCategory\", { slug: tag.slug() })}>\n                {tag.name()}\n              </Link>\n            ))}\n\n        {this.loading &&\n          [0, 1].map(() => (\n            <span className=\"FlarumBlog-Article-GhostCategory\">Category</span>\n          ))}\n      </div>,\n      60\n    );\n\n    items.add(\n      \"post\",\n      <div className={\"FlarumBlog-Article-Post\"}>\n        {this.postItems().toArray()}\n      </div>,\n      40\n    );\n\n    return items;\n  }\n\n  articleItems() {\n    const items = new ItemList();\n\n    items.add(\n      \"content\",\n      <div className=\"FlarumBlog-Article-Content\">\n        {this.contentItems().toArray()}\n      </div>,\n      100\n    );\n\n    if (\n      !(this?.article?.isLocked?.() && this?.article?.commentCount?.() === 1)\n    ) {\n      items.add(\n        \"comments\",\n        <div className={\"FlarumBlog-Article-Comments\"}>\n          {/* Show subscription state */}\n          {!this.loading &&\n            app.session.user &&\n            this.article.subscription &&\n            (!this.article.isLocked ||\n              (this.article.isLocked && !this.article.isLocked())) && (\n              <ArticleSubscription discussion={this.article} />\n            )}\n\n          <h4>\n            {app.translator.trans(\n              \"v17development-flarum-blog.forum.comment_section.comments\"\n            )}{\" \"}\n            ({this.article ? this.article.commentCount() - 1 : 0})\n          </h4>\n\n          {/* Locked */}\n          {!this.loading && this.article?.isLocked?.() && (\n            <div className={\"Post-body\"}>\n              <blockquote class=\"uncited\">\n                <div>\n                  <span\n                    className={\"far fa-lock\"}\n                    style={{ marginRight: \"5px\" }}\n                  />{\" \"}\n                  {app.translator.trans(\n                    \"v17development-flarum-blog.forum.comment_section.locked\"\n                  )}\n                </div>\n              </blockquote>\n            </div>\n          )}\n\n          {!this.loading &&\n            this.article &&\n            PostStream.component({\n              discussion: this.article,\n              stream: this.stream,\n              onPositionChange: this.positionChanged.bind(this),\n            })}\n        </div>,\n        75\n      );\n    }\n\n    return items;\n  }\n\n  view() {\n    return [\n      app.forum.attribute(\"blogAddHero\") == true && IndexPage.prototype.hero(),\n      <div className={\"FlarumBlogItem\"}>\n        <div className={\"container\"}>\n          <div className={\"FlarumBlog-ToolButtons\"}>\n            <Link\n              href={app.route(\"blog\")}\n              className={\"Button\"}\n              onclick={(e) => {\n                if (app.previous.matches(BlogOverview)) {\n                  e.preventDefault();\n                  history.back();\n                }\n              }}\n            >\n              <i class=\"icon fas fa-angle-left Button-icon\"></i>\n              <span class=\"Button-label\">\n                {app.translator.trans(\n                  \"v17development-flarum-blog.forum.return_to_overview\"\n                )}\n              </span>\n            </Link>\n          </div>\n          <div className={\"FlarumBlog-Article\"}>\n            <div className={\"FlarumBlog-Article-Container\"}>\n              {this.articleItems().toArray()}\n            </div>\n\n            <BlogItemSidebar article={this.article} loading={this.loading} />\n          </div>\n        </div>\n      </div>,\n    ];\n  }\n\n  positionChanged(startNumber, endNumber) {\n    const article = this.article;\n\n    if (app.session.user && endNumber > (article.lastReadPostNumber() || 0)) {\n      article.save({ lastReadPostNumber: endNumber });\n      m.redraw();\n    }\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/models/Tag'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Discussion'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/mixin'];","import Model from \"flarum/common/Model\";\nimport mixin from \"flarum/common/utils/mixin\";\n\nexport default class BlogMeta extends mixin(Model, {\n  discussion: Model.hasOne(\"discussion\"),\n  featuredImage: Model.attribute(\"featuredImage\"),\n  summary: Model.attribute(\"summary\"),\n  isFeatured: Model.attribute(\"isFeatured\"),\n  isSized: Model.attribute(\"isSized\"),\n  isPendingReview: Model.attribute(\"isPendingReview\"),\n}) {}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/components/TagsPage'];","import { extend } from \"flarum/common/extend\";\nimport IndexPage from \"flarum/forum/components/IndexPage\";\nimport TagsPage from \"flarum/tags/components/TagsPage\";\n\nexport default function extendTagOverview() {\n  extend(TagsPage.prototype, \"view\", function (markup) {\n    // Pending xhr to load all tags, throw back loading indicator.\n    if (this.loading) {\n      return markup;\n    }\n\n    if (app.forum.attribute(\"blogHideTags\") === false) return markup;\n\n    // Get knowledge base tag ID's\n    const knowledgeBaseTags = app.forum.attribute(\"blogTags\") || [];\n\n    // Get tiles\n    let tag_tiles = markup.children[1].children[1].children[0].children;\n\n    // Map through the tiles and remove tiles that are part of the knowledge base\n    markup.children[1].children[1].children[0].children = tag_tiles.map(\n      (tile, i) => {\n        return knowledgeBaseTags.indexOf(this.tags[i].id()) >= 0 ? null : tile;\n      }\n    );\n\n    return markup;\n  });\n\n  extend(IndexPage.prototype, \"navItems\", function (items) {\n    if (app.forum.attribute(\"blogHideTags\") === false) return items;\n\n    const blogTags = app.forum.attribute(\"blogTags\") || [];\n\n    blogTags.forEach((id) => {\n      items.remove(`tag${id}`);\n    });\n\n    return items;\n  });\n}\n","export default function () {\n  // Save the original function before we override it\n  const original_discussion_route = app.route.discussion;\n\n  /**\n   * Generate a URL to a discussion OR a Blog Article.\n   *\n   * CORE_CODE_OVERRIDE: This overrides the standard function from flarum/core.\n   * The code is inspired from js/src/forum/routes.js and now handles different types of discussions.\n   * It will try to keep the original function executed if the discussion being\n   * processed isn't a blog article.\n   *\n   * @param {Discussion} discussion\n   * @param {Integer} [near]\n   * @return {String}\n   */\n  app.route.discussion = (discussion, near) => {\n    const discussionRedirectEnabled =\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"both\" ||\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"discussions_only\";\n    let shouldRedirect = false;\n    if (discussionRedirectEnabled && discussion.tags().length > 0) {\n      const blogTags = app.forum.attribute(\"blogTags\");\n\n      const foundTags = discussion.tags().filter((tag) => {\n        return (\n          blogTags.indexOf(tag.id()) >= 0 ||\n          (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)\n        );\n      });\n\n      if (foundTags.length > 0) {\n        shouldRedirect = true;\n      }\n    }\n    if (shouldRedirect) {\n      return discussion.lastReadPostNumber() > 1\n        ? app.route(\"blogArticle.near\", {\n            id: discussion.slug(),\n            near: discussion.lastReadPostNumber(),\n          })\n        : app.route(\"blogArticle\", {\n            id: discussion.slug(),\n          });\n    } else {\n      return original_discussion_route(discussion, near);\n    }\n  };\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/ComposerBody'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/TextEditor'];","import Component from \"flarum/common/Component\";\n\nexport default class ComposerPreview extends Component {\n  view() {\n    return <div />;\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    s9e.TextFormatter.preview(vnode.attrs.content || \"\", vnode.dom);\n  }\n}\n","import ComposerBody from \"flarum/forum/components/ComposerBody\";\nimport Button from \"flarum/common/components/Button\";\nimport TextEditor from \"flarum/common/components/TextEditor\";\nimport ComposerPreview from \"./ComposerPreview\";\nimport app from \"flarum/forum/app\";\n\nexport default class Composer extends ComposerBody {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.previewContent = false;\n  }\n\n  // Render\n  view() {\n    const hasContent =\n      this.composer.fields.content() && this.composer.fields.content() !== \"\";\n    const loading = this.loading || this.attrs.disabled;\n\n    return (\n      <div\n        className={`Flarum-Blog-Composer ${\n          loading ? \"Flarum-Blog-Composer-Loading\" : \"\"\n        }`}\n      >\n        <div className={\"Flarum-Blog-Composer-tabs\"}>\n          <Button\n            className={!this.previewContent && \"AricleComposerButtonSelected\"}\n            onclick={() => (this.previewContent = false)}\n          >\n            {app.translator.trans(\n              \"v17development-flarum-blog.forum.composer.write\"\n            )}\n          </Button>\n          <Button\n            className={this.previewContent && \"AricleComposerButtonSelected\"}\n            onclick={() => (this.previewContent = true)}\n          >\n            {app.translator.trans(\n              \"v17development-flarum-blog.forum.composer.view\"\n            )}\n          </Button>\n        </div>\n\n        <div\n          className={`Composer Flarum-Blog-Composer-body ${\n            this.previewContent ? \"Flarum-Blog-Composer-HideEditor\" : \"\"\n          }`}\n        >\n          {this.previewContent && (\n            <div className={\"Flarum-Blog-Composer-preview\"}>\n              {!hasContent &&\n                app.translator.trans(\n                  \"v17development-flarum-blog.forum.composer.nothing_to_preview\"\n                )}\n\n              <ComposerPreview content={this.composer.fields.content()} />\n            </div>\n          )}\n\n          {TextEditor.component({\n            submitLabel:\n              this.attrs.submitLabel ||\n              app.translator.trans(\"core.forum.composer_edit.submit_button\"),\n            placeholder: this.attrs.placeholder,\n            disabled: loading,\n            composer: this.composer,\n            preview: this.jumpToPreview && this.jumpToPreview.bind(this),\n            onchange: this.composer.fields.content,\n            onsubmit: this.onsubmit.bind(this),\n            value: this.composer.fields.content(),\n          })}\n        </div>\n      </div>\n    );\n  }\n\n  // Submit trigger\n  onsubmit() {\n    if (this.attrs.onsubmit) {\n      this.attrs.onsubmit();\n    }\n  }\n}\n","import app from \"flarum/forum/app\";\nimport Page from \"flarum/common/components/Page\";\nimport Button from \"flarum/common/components/Button\";\nimport Link from \"flarum/common/components/Link\";\nimport BlogAuthor from \"../components/BlogItemSidebar/BlogAuthor\";\nimport RenameArticleModal from \"../components/Modals/RenameArticleModal\";\nimport TagDiscussionModal from \"flarum/tags/components/TagDiscussionModal\";\nimport BlogPostSettingsModal from \"../components/Modals/BlogPostSettingsModal\";\nimport Composer from \"../components/Composer/Composer\";\nimport LanguageDropdown from \"../components/LanguageDropdown/LanguageDropdown\";\nimport ItemList from \"flarum/common/utils/ItemList\";\n\nexport default class BlogComposer extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.setTitle(app.translator.trans(\"v17development-flarum-blog.forum.blog\"));\n\n    // User cannot write blogs\n    if (!app.forum.attribute(\"canWriteBlogPosts\")) {\n      m.route.set(app.route(\"blog\"));\n      return;\n    }\n\n    // Send history push\n    app.history.push(\"blogComposer\");\n\n    // Get languages (if enabled)\n    this.languages = app.store.all(\"discussion-languages\") || [];\n\n    // Set body class\n    this.bodyClass = \"BlogItemPage BlogItemPage--composer\";\n\n    // Article data\n    this.articleLanguage = m.route.param(\"lang\")\n      ? m.route.param(\"lang\")\n      : app.translator.locale;\n    this.article = app.store.createRecord(\"discussions\");\n    this.blogMeta = null;\n\n    this.tags = [];\n\n    // Pre-select tags\n    if (m.route.param().tags) {\n      const tagList = Array.isArray(m.route.param().tags)\n        ? m.route.param().tags\n        : m.route.param().tags.split(\",\");\n\n      if (m.route.param().tags.length > 0) {\n        tagList.forEach((tagId) => {\n          const foundTag = app.store.getById(\"tags\", tagId);\n\n          if (foundTag) {\n            this.tags.push(foundTag);\n          }\n        });\n      }\n    }\n\n    this.isSaving = false;\n  }\n\n  openTagsModal(e = null) {\n    if (e) {\n      e.preventDefault();\n    }\n\n    if (this.isSaving) return;\n\n    app.modal.show(TagDiscussionModal, {\n      selectedTags: this.tags,\n      onsubmit: (tags) => {\n        this.tags = tags;\n      },\n    });\n  }\n\n  openNameArticleModal(e = null) {\n    if (e) {\n      e.preventDefault();\n    }\n\n    if (this.isSaving) return;\n\n    app.modal.show(RenameArticleModal, {\n      article: this.article,\n      onChange: (title) => {\n        this.article.pushData({\n          attributes: {\n            title,\n          },\n        });\n      },\n    });\n  }\n\n  openBlogSettings(e) {\n    e.preventDefault();\n\n    if (this.isSaving) return;\n\n    app.modal.show(BlogPostSettingsModal, {\n      meta: this.blogMeta,\n      onsubmit: (meta) => (this.blogMeta = meta),\n    });\n  }\n\n  view() {\n    return (\n      <div className={\"FlarumBlogItem\"}>\n        <div className={\"container\"}>{this.pageItems().toArray()}</div>\n      </div>\n    );\n  }\n\n  pageItems() {\n    const items = new ItemList();\n\n    items.add(\n      \"toolButtons\",\n      <div className=\"FlarumBlog-ToolButtons\">\n        <Link\n          href={app.route(\"blog\")}\n          className=\"Button\"\n          loading={this.isSaving}\n          icon=\"fas fa-angle-left\"\n        >\n          <i class=\"icon fas fa-angle-left Button-icon\" />\n          <span class=\"Button-label\">\n            {app.translator.trans(\n              \"v17development-flarum-blog.forum.return_to_overview\"\n            )}\n          </span>\n        </Link>\n      </div>,\n      100\n    );\n\n    items.add(\n      \"article\",\n      <div className={\"FlarumBlog-Article\"}>\n        {this.articleWrapperItems().toArray()}\n      </div>,\n      90\n    );\n\n    return items;\n  }\n\n  articleWrapperItems() {\n    const items = new ItemList();\n\n    items.add(\n      \"container\",\n      <div className=\"FlarumBlog-Article-Container\">\n        {this.articleItems().toArray()}\n      </div>,\n      100\n    );\n\n    items.add(\n      \"sidebar\",\n      <div className=\"FlarumBlog-Article-Sidebar\">\n        <BlogAuthor user={app.session.user} />\n      </div>,\n      90\n    );\n\n    return items;\n  }\n\n  articleItems() {\n    const items = new ItemList();\n\n    const defaultImage = app.forum.attribute(\"blogDefaultImage\")\n      ? `url(${\n          app.forum.attribute(\"baseUrl\") +\n          \"/assets/\" +\n          app.forum.attribute(\"blogDefaultImage\")\n        })`\n      : null;\n\n    const blogImage =\n      this.blogMeta && this.blogMeta.featuredImage()\n        ? `url(${this.blogMeta.featuredImage()})`\n        : defaultImage;\n\n    items.add(\n      \"content\",\n      <div className=\"FlarumBlog-Article-Content\">\n        <div\n          className={`FlarumBlog-Article-Image FlarumBlog-default-image`}\n          style={{\n            backgroundImage: blogImage,\n            cursor: \"pointer\",\n          }}\n          onclick={(e) => this.openBlogSettings(e)}\n        />\n\n        <div className={\"FlarumBlog-Article-Content-Edit-Button\"}>\n          <div\n            className={\n              this.languages.length === 0\n                ? \"FlarumBlog-Article-Content-Edit-Dropdown\"\n                : \"FlarumBlog-Article-Content-EditButtons\"\n            }\n          >\n            {this.languages !== null && this.languages.length >= 1 && (\n              <LanguageDropdown\n                selected={this.articleLanguage}\n                onclick={(language) => (this.articleLanguage = language)}\n              />\n            )}\n\n            <Button\n              className={\"Button\"}\n              onclick={(e) => this.openBlogSettings(e)}\n              icon={\"fas fa-pencil-alt\"}\n              loading={this.isSaving}\n            >\n              {app.translator.trans(\n                \"v17development-flarum-blog.forum.composer.update_settings\"\n              )}\n            </Button>\n          </div>\n        </div>\n\n        {/* Article Categories */}\n        <div className={\"FlarumBlog-Article-Categories\"}>\n          {this.tags.map((tag) => (\n            <button\n              class=\"Button Button--text\"\n              onclick={(e) => this.openTagsModal(e)}\n            >\n              {tag.name()}\n            </button>\n          ))}\n\n          <button\n            class=\"Button Button--text\"\n            onclick={(e) => this.openTagsModal(e)}\n          >\n            {this.tags.length === 0\n              ? app.translator.trans(\n                  \"v17development-flarum-blog.forum.composer.select_category\"\n                )\n              : app.translator.trans(\n                  \"v17development-flarum-blog.forum.composer.edit_categories\"\n                )}{\" \"}\n            <i className={\"fas fa-edit\"} />\n          </button>\n        </div>\n\n        <div className={\"FlarumBlog-Article-Post\"}>\n          {/* Article name */}\n          <h3\n            onclick={() => this.openNameArticleModal()}\n            className=\"FlarumBlog-Article-Title\"\n            style={{ cursor: \"pointer\" }}\n          >\n            {this.article && this.article.title() && this.article.title() !== \"\"\n              ? this.article.title()\n              : app.translator.trans(\n                  \"v17development-flarum-blog.forum.composer.no_title\"\n                )}\n\n            <button\n              class=\"Button Button--text\"\n              onclick={(e) => e.preventDefault()}\n            >\n              <i className={\"fas fa-edit\"} />\n            </button>\n          </h3>\n\n          <div className=\"Post-body\">\n            <Composer\n              composer={app.composer}\n              originalContent={\"\"}\n              submitLabel={app.translator.trans(\n                \"v17development-flarum-blog.forum.composer.post_article\"\n              )}\n              placeholder={app.translator.trans(\n                \"v17development-flarum-blog.forum.composer.enter_message_here\"\n              )}\n              onsubmit={() => this.create()}\n              disabled={this.isSaving}\n            />\n          </div>\n        </div>\n      </div>,\n      100\n    );\n\n    items.add(\n      \"commentsPlaceholder\",\n      <div className=\"FlarumBlog-Article-Comments\">\n        <h4>\n          {app.translator.trans(\n            \"v17development-flarum-blog.forum.comment_section.comments\"\n          )}{\" \"}\n          (0)\n        </h4>\n        {/* Locked */}\n\n        <div className=\"Post-body\">\n          <blockquote class=\"uncited\">\n            <div>\n              <span className=\"fas fa-ban\" style={{ marginRight: \"5px\" }} />{\" \"}\n              {app.translator.trans(\n                \"v17development-flarum-blog.forum.composer.comment_section\"\n              )}\n            </div>\n          </blockquote>\n        </div>\n      </div>,\n      90\n    );\n\n    return items;\n  }\n\n  create() {\n    const blogTags = app.forum.attribute(\"blogTags\") || [];\n\n    // Force tags\n    if (this.tags.length === 0) {\n      this.openTagsModal();\n      return;\n    }\n\n    // Force title\n    if (!this.article.title() || this.article.title() === \"\") {\n      this.openNameArticleModal();\n      return;\n    }\n\n    // Find knowledge base tags\n    const findblogTags = this.tags.filter((tag) => {\n      return blogTags.indexOf(tag.id()) >= 0;\n    });\n\n    // No knowledge base tags selected\n    if (findblogTags.length === 0) {\n      alert(\n        app.translator.trans(\n          \"v17development-flarum-blog.forum.composer.no_blog_tags_selected\"\n        )\n      );\n      return;\n    }\n\n    if (\n      (this.blogMeta === null ||\n        (!this.blogMeta.featuredImage() &&\n          !app.forum.attribute(\"blogDefaultImage\")) ||\n        !this.blogMeta.summary()) &&\n      !confirm(\n        app.translator.trans(\n          \"v17development-flarum-blog.forum.composer.post_without_blog_info\"\n        )\n      )\n    ) {\n      return;\n    }\n\n    let relationships = {\n      tags: this.tags,\n    };\n\n    // Add languages if possible\n    if (this.languages.length > 0) {\n      relationships.language = app.store.getBy(\n        \"discussion-languages\",\n        \"code\",\n        this.articleLanguage\n      );\n    }\n\n    const data = {\n      title: this.article.title(),\n      content: app.composer.fields.content(),\n      relationships,\n      blogMeta:\n        this.blogMeta !== null\n          ? {\n              featuredImage: this.blogMeta.featuredImage(),\n              summary: this.blogMeta.summary(),\n              isSized: this.blogMeta.isSized(),\n            }\n          : null,\n    };\n\n    this.isSaving = true;\n\n    this.article\n      .save(data)\n      .then((article) => {\n        setTimeout(() => {\n          // Redirect to the article\n          m.route.set(app.route(\"blogArticle\", { id: `${article.slug()}` }));\n        }, 500);\n      })\n      .catch(() => {\n        this.isSaving = false;\n        m.redraw();\n      });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core;","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","import { extend } from \"flarum/common/extend\";\nimport IndexPage from \"flarum/forum/components/IndexPage\";\nimport LinkButton from \"flarum/common/components/LinkButton\";\n\nexport default function addSidebarNav() {\n  extend(IndexPage.prototype, \"navItems\", function (items) {\n    if (\n      app.forum.attribute(\"blogAddSidebarNav\") &&\n      app.forum.attribute(\"blogAddSidebarNav\") !== \"0\"\n    ) {\n      items.add(\n        \"blog\",\n        <LinkButton icon=\"fas fa-comment\" href={app.route(\"blog\")}>\n          {app.translator.trans(\"v17development-flarum-blog.forum.blog\")}\n        </LinkButton>,\n        15\n      );\n    }\n\n    return items;\n  });\n}\n","import type Component from \"flarum/common/components/Component\";\nimport Modal from \"flarum/common/components/Modal\";\n\n/**\n * Notice from V17: Temporary override due to lack of multi-dialogs!\n *\n * We'll open a PR to support multi-dialog to the Flarum main repo\n */\n\n/**\n * Ideally, `show` would take a higher-kinded generic, ala:\n *  `show<Attrs, C>(componentClass: C<Attrs>, attrs: Attrs): void`\n * Unfortunately, TypeScript does not support this:\n * https://github.com/Microsoft/TypeScript/issues/1213\n * Therefore, we have to use this ugly, messy workaround.\n */\ntype UnsafeModalClass = ComponentClass<any, Modal> & {\n  isDismissible: boolean;\n  component: typeof Component.component;\n};\n\n/**\n * Class used to manage modal state.\n *\n * Accessible on the `app` object via `app.modal` property.\n */\nexport default class OverrideModalState {\n  /**\n   * @internal\n   */\n  modal: null | {\n    componentClass: UnsafeModalClass;\n    attrs?: Record<string, unknown>;\n    key: number;\n  } = null;\n\n  modalList: Array = [];\n\n  /**\n   * Used to force re-initialization of modals if a modal\n   * is replaced by another of the same type.\n   */\n  private key = 0;\n\n  private closeTimeout?: NodeJS.Timeout;\n\n  /**\n   * Shows a modal dialog.\n   *\n   * If a modal is already open, the existing one will close and the new modal will replace it.\n   *\n   * @example <caption>Show a modal</caption>\n   * app.modal.show(MyCoolModal, { attr: 'value' });\n   *\n   * @example <caption>Show a modal from a lifecycle method (`oncreate`, `view`, etc.)</caption>\n   * // This \"hack\" is needed due to quirks with nested redraws in Mithril.\n   * setTimeout(() => app.modal.show(MyCoolModal, { attr: 'value' }), 0);\n   */\n  show(\n    componentClass: UnsafeModalClass,\n    attrs: Record<string, unknown> = {},\n    keepLast: Boolean = false\n  ): void {\n    if (!(componentClass.prototype instanceof Modal)) {\n      // This is duplicated so that if the error is caught, an error message still shows up in the debug console.\n      const invalidModalWarning = \"The ModalManager can only show Modals.\";\n      console.error(invalidModalWarning);\n      throw new Error(invalidModalWarning);\n    }\n\n    if (this.closeTimeout) clearTimeout(this.closeTimeout);\n\n    // Open new modal\n    this.modal = { componentClass, attrs, key: this.key++ };\n\n    // Remember previously opened modal\n    if (keepLast) {\n      this.modalList.push(this.modal);\n    } else {\n      // Override last modals\n      this.modalList = [this.modal];\n    }\n\n    m.redraw.sync();\n  }\n\n  /**\n   * Closes the currently open dialog, if one is open.\n   */\n  close(): void {\n    if (!this.modal) return;\n\n    // There are more modals currently opened\n    // Close current and open last in list\n    if (this.modalList.length >= 2) {\n      $(`.modal[modal-key=${this.modal?.key}]`)\n        .one(\"hide.bs.modal\", () => {\n          const currentModalPosition = this.modalList.indexOf(this.modal);\n\n          // Remove last modal from list\n          this.modalList.splice(currentModalPosition, 1);\n\n          // Open last modal from list\n          this.modal = this.modalList[this.modalList.length - 1];\n\n          setTimeout(() => {\n            $(document.body).addClass(\"modal-open\");\n          }, 1000);\n\n          m.redraw();\n        })\n        .modal(\"hide\");\n\n      m.redraw();\n      return;\n    }\n\n    // Don't hide the modal immediately, because if the consumer happens to call\n    // the `show` method straight after to show another modal dialog, it will\n    // cause Bootstrap's modal JS to misbehave. Instead we will wait for a tiny\n    // bit to give the `show` method the opportunity to prevent this from going\n    // ahead.\n\n    this.closeTimeout = setTimeout(() => {\n      $(`.modal[modal-key=${this.modal?.key}]`)\n        .modal(\"hide\")\n        .one(\"hide.bs.modal\", () => {\n          this.modal = null;\n\n          m.redraw();\n        });\n    });\n  }\n\n  /**\n   * Checks if a modal is currently open.\n   *\n   * @return `true` if a modal dialog is currently open, otherwise `false`.\n   */\n  isModalOpen(): boolean {\n    return !!this.modal;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/ModalManager'];","import BlogItem from \"./pages/BlogItem\";\nimport Model from \"flarum/common/Model\";\nimport Tag from \"flarum/tags/models/Tag\";\nimport Discussion from \"flarum/common/models/Discussion\";\nimport BlogOverview from \"./pages/BlogOverview\";\nimport redirector from \"./utils/redirector\";\nimport BlogMeta from \"../common/Models/BlogMeta\";\nimport extendTagOverview from \"./utils/extendTagOverview\";\nimport discussionRouting from \"./utils/discussionRouting\";\nimport BlogComposer from \"./pages/BlogComposer\";\nimport compat from \"./compat\";\nimport addSidebarNav from \"./utils/addSidebarNav\";\nimport app from \"flarum/forum/app\";\n\n// Create our own modal manager\nimport OverrideModalState from \"./states/OverrideModalState\";\nimport overrideModalManager from \"./utils/overrideModalManager\";\n\n// Register Flarum Blog\napp.initializers.add(\n  \"v17development-flarum-blog\",\n  (app) => {\n    app.routes.blog = { path: \"/blog\", component: BlogOverview };\n\n    app.routes.blogCategory = {\n      path: \"/blog/category/:slug\",\n      component: BlogOverview,\n    };\n\n    app.routes.blogComposer = {\n      path: \"/blog/compose\",\n      component: BlogComposer,\n    };\n\n    app.routes.blogArticle = { path: \"/blog/:id\", component: BlogItem };\n\n    app.routes[\"blogArticle.near\"] = {\n      path: \"/blog/:id/:near\",\n      component: BlogItem,\n    };\n\n    app.store.models.blogMeta = BlogMeta;\n\n    Discussion.prototype.blogMeta = Model.hasOne(\"blogMeta\");\n    Tag.prototype.isBlog = Model.attribute(\"isBlog\");\n\n    // Redirect discussions/tags to their blog post/overview\n    redirector();\n\n    // Extend tag overview.\n    // Hide tags which are used as blog category\n    extendTagOverview();\n\n    // Make that blog articles have a blog route and not a discussion route\n    discussionRouting();\n\n    // Add a link to the blog to the IndexPage sidebar, if enabled.\n    addSidebarNav();\n\n    /**\n     * Notice from V17: Temporary override due to lack of multi-dialogs!\n     *\n     * We'll open a PR to support multi-dialog to the Flarum main repo\n     */\n    overrideModalManager();\n    app.modal = new OverrideModalState();\n  },\n  -100000\n);\n\ncompat();\n","import IndexPage from \"flarum/forum/components/IndexPage\";\nimport DiscussionPage from \"flarum/forum/components/DiscussionPage\";\nimport { extend, override } from \"flarum/common/extend\";\nimport app from \"flarum/forum/app\";\n\nexport default function () {\n  // Redirect tag to blog category\n  extend(IndexPage.prototype, \"oncreate\", function () {\n    const tag = this.currentTag();\n    const tagRedirectEnabled =\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"both\" ||\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"tags_only\";\n\n    // Only trigger when it's a tag page and the redirects are enabled\n    if (tag && tagRedirectEnabled) {\n      const blogTags = app.forum.attribute(\"blogTags\");\n\n      // Tag is inside list\n      if (\n        blogTags.indexOf(tag.id()) >= 0 ||\n        (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)\n      ) {\n        m.route.set(app.route(\"blog\"));\n      }\n    }\n  });\n\n  // Redirect discussion to blog article\n  override(DiscussionPage.prototype, \"show\", function (original, discussion) {\n    const discussionRedirectEnabled =\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"both\" ||\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"discussions_only\";\n\n    if (\n      discussionRedirectEnabled &&\n      discussion &&\n      discussion &&\n      discussion.tags().length > 0\n    ) {\n      const blogTags = app.forum.attribute(\"blogTags\");\n\n      const foundTags = discussion.tags().filter((tag) => {\n        return (\n          blogTags.indexOf(tag.id()) >= 0 ||\n          (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)\n        );\n      });\n\n      // Only redirect if the discussion has blog tags\n      if (foundTags.length > 0) {\n        // Redirect to blog article\n        const url = app.route(\"blogArticle\", {\n          id: discussion.slug(),\n        });\n\n        m.route.set(url, null, { replace: true });\n\n        return null;\n      }\n    }\n\n    return original(discussion);\n  });\n}\n","import ModalManager from \"flarum/forum/components/ModalManager\";\nimport { override } from \"flarum/common/extend\";\n\n/**\n * Notice from V17: Temporary override due to lack of multi-dialogs!\n *\n * We'll open a PR to support multi-dialog to the Flarum main repo\n */\n\nexport default function overrideModalManager() {\n  override(ModalManager.prototype, \"view\", function () {\n    return this.attrs.state.modalList.map((modal) => {\n      const Tag = modal?.componentClass;\n\n      return (\n        <div className=\"ModalManager modal fade\" modal-key={modal.key}>\n          {!!Tag && (\n            <Tag\n              key={modal?.key}\n              {...modal.attrs}\n              animateShow={this.animateShow.bind(this)}\n              animateHide={this.animateHide.bind(this)}\n              state={this.attrs.state}\n            />\n          )}\n        </div>\n      );\n    });\n  });\n\n  override(ModalManager.prototype, \"animateHide\", function () {\n    if (this.attrs.state.modalList.length === 1) {\n      this.modalShown = false;\n    }\n  });\n\n  override(\n    ModalManager.prototype,\n    \"animateShow\",\n    function (readyCallback = () => {}) {\n      if (!this.attrs.state.modal) return;\n\n      const dismissible = !!this.attrs.state.modal.componentClass.isDismissible;\n\n      this.modalShown = true;\n\n      // If we are opening this modal while another modal is already open,\n      // the shown event will not run, because the modal is already open.\n      // So, we need to manually trigger the readyCallback.\n      if ($(`.modal[modal-key=${this.attrs.state.modal.key}]`).hasClass(\"in\")) {\n        readyCallback();\n        return;\n      }\n\n      setTimeout(() => {\n        $(`.modal[modal-key=${this.attrs.state.modal.key}]`)\n          .one(\"shown.bs.modal\", readyCallback)\n          // @ts-expect-error: No typings available for Bootstrap modals.\n          .modal({\n            backdrop: dismissible || \"static\",\n            keyboard: dismissible,\n            show: true,\n          });\n      }, 1);\n    }\n  );\n}\n","import { compat } from \"@flarum/core/forum\";\nimport BlogAuthor from \"./components/BlogItemSidebar/BlogAuthor\";\nimport BlogItemSidebar from \"./components/BlogItemSidebar/BlogItemSidebar\";\nimport BlogOverviewItem from \"./components/BlogOverviewItem\";\nimport BlogPostController from \"./components/BlogPostController\";\nimport FeaturedBlogItem from \"./components/FeaturedBlogItem\";\nimport ForumNav from \"./components/ForumNav\";\nimport BlogItem from \"./pages/BlogItem\";\nimport BlogOverview from \"./pages/BlogOverview\";\n\nexport default () => {\n  Object.assign(compat, {\n    \"v17development/blog/components/BlogItemSidebar\": BlogItemSidebar,\n    \"v17development/blog/components/BlogAuthor\": BlogAuthor,\n    \"v17development/blog/components/ForumNav\": ForumNav,\n    \"v17development/blog/components/BlogPostController\": BlogPostController,\n    \"v17development/blog/components/BlogOverviewItem\": BlogOverviewItem,\n    \"v17development/blog/components/FeaturedBlogItem\": FeaturedBlogItem,\n    \"v17development/blog/pages/BlogItem\": BlogItem,\n    \"v17development/blog/pages/BlogOverview\": BlogOverview,\n  });\n};\n"],"names":["module","exports","runtime","undefined","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","GenStateSuspendedStart","method","arg","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","GenStateSuspendedYield","makeInvokeMethod","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","toString","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","flarum","extensions","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","o","get","prop","r","_setPrototypeOf","p","_inheritsLoose","subClass","superClass","core","compat","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","BlogPostSettingsModal","oninit","vnode","attrs","article","meta","blogMeta","app","isNew","exists","summary","Stream","featuredImage","isFeatured","isSized","isPendingReview","className","title","content","fields","toArray","items","ItemList","add","style","maxWidth","minWidth","width","minHeight","bidi","placeholder","fofUploadButton","require","components","Uploader","FileManagerModal","uploader","class","onclick","onSelect","files","file","url","icon","src","alt","marginTop","Switch","onchange","val","fontWeight","Button","loading","submitData","relationships","isComposer","discussion","onsubmit","e","preventDefault","pushData","attributes","hide","save","m","redraw","response","handleErrors","Modal","RenameArticleModal","redirect","translator","trans","onChange","slug","route","set","window","history","replaceState","document","BlogPostController","init","loadedPost","manageArticleButtons","LanguageDiscussionModal","canRename","articlePost","firstPost","disabled","canEdit","EditPostComposer","post","canTag","TagDiscussionModal","Alert","canChangeLanguage","canLock","DiscussionControls","isLocked","canHide","isHidden","canDelete","buttons","confirm","extractText","view","Dropdown","label","buttonClassName","menuClassName","onshow","Component","BlogAuthor","author","user","backgroundColor","color","href","username","avatar","bio","listItems","BlogCategories","blogCategories","forum","attribute","map","tagId","tag","store","getById","tags","showSubTags","param","all","_tag","isChild","parent","categoryItem","id","ForumNav","navItems","IndexPage","BlogItemSidebar","itemlist","component","Language","languages","options","reduce","lang","code","extra","language","uppercase","toUpperCase","LanguageDropdown","selected","defaultSelected","formatter","locale","active","BlogOverviewItem","titleItems","text","dataItems","humanTime","createdAt","commentCount","contentItems","getImage","defaultImage","blogImage","classList","backgroundImage","FeaturedBlogItem","topItems","isSticky","position","BlogOverview","bodyClass","isLoading","featuredPosts","posts","hasMore","isLoadingMore","currentSelectedLanguage","loadBlogOverview","featuredCount","parseInt","showCategories","showForumNav","preloadBlogOverview","setTimeout","show","bind","reloadData","q","filter","sort","articles","payload","links","loadMore","replace","data","newArticle","location","pathname","clear","Array","fill","currentCategory","join","Page","ArticleSubscription","currentSubscriptionState","subscription","notifyEmail","session","preferences","notifyTooltip","saveSubscription","indexOf","BlogItem","near","found","loadBlogItem","split","includedPosts","included","articleId","b","stream","PostStreamState","goToNumber","lastReadPostNumber","postItems","fullTime","fontSize","marginRight","opacity","articleItems","PostStream","onPositionChange","positionChanged","back","startNumber","endNumber","BlogMeta","mixin","Model","extendTagOverview","extend","TagsPage","markup","knowledgeBaseTags","tag_tiles","children","tile","remove","original_discussion_route","shouldRedirect","blogTags","ComposerPreview","oncreate","s9e","TextFormatter","preview","dom","Composer","previewContent","hasContent","composer","TextEditor","submitLabel","jumpToPreview","ComposerBody","BlogComposer","articleLanguage","tagList","isArray","foundTag","isSaving","openTagsModal","selectedTags","openNameArticleModal","openBlogSettings","pageItems","articleWrapperItems","cursor","originalContent","alert","addSidebarNav","OverrideModalState","modal","modalList","closeTimeout","componentClass","keepLast","invalidModalWarning","console","clearTimeout","sync","close","$","one","currentModalPosition","splice","body","addClass","isModalOpen","routes","blog","path","blogCategory","blogComposer","blogArticle","models","Discussion","Tag","currentTag","tagRedirectEnabled","override","DiscussionPage","original","discussionRouting","ModalManager","animateShow","animateHide","modalShown","readyCallback","dismissible","isDismissible","hasClass","backdrop","keyboard","assign"],"sourceRoot":""}