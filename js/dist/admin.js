module.exports=function(t){var e={};function a(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(n,s,function(e){return t[e]}.bind(null,s));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=52)}({1:function(t,e){t.exports=flarum.core.compat["admin/app"]},11:function(t,e){t.exports=flarum.core.compat["common/components/Modal"]},13:function(t,e){t.exports=flarum.core.compat["common/components/Alert"]},18:function(t,e){t.exports=flarum.core.compat["common/components/FieldSet"]},2:function(t,e,a){"use strict";function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)}a.d(e,"a",(function(){return s}))},25:function(t,e){t.exports=flarum.core.compat["admin/utils/saveSettings"]},3:function(t,e){t.exports=flarum.core.compat["common/components/Button"]},45:function(t,e){t.exports=flarum.core.compat["admin/components/BasicsPage"]},46:function(t,e){t.exports=flarum.core.compat["admin/components/PermissionGrid"]},47:function(t,e){t.exports=flarum.core.compat["admin/components/ExtensionPage"]},48:function(t,e){t.exports=flarum.core.compat["admin/components/UploadImageButton"]},52:function(t,e,a){"use strict";a.r(e);var n=a(7),s=a(45),o=a.n(s),r=a(46),l=a.n(r),i=a(2),d=a(1),c=a.n(d),g=a(47),u=a.n(g),p=a(25),b=a.n(p),h=a(13),f=a.n(h),_=a(3),v=a.n(_),y=a(18),x=a.n(y),C=a(8),w=a.n(C),N=a(11),O=function(t){function e(){return t.apply(this,arguments)||this}Object(i.a)(e,t);var a=e.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),this.blogCategoriesOriginal=app.data.settings.blog_tags?app.data.settings.blog_tags.split("|"):[],this.blogCategories=app.data.settings.blog_tags?app.data.settings.blog_tags.split("|"):[],this.isSaving=!1,this.hasChanges=!1},a.title=function(){return"Select blog categories"},a.className=function(){return"Modal modal-dialog FlarumBlog-TagsModal"},a.content=function(){var t=this;return m("div",null,m("div",{className:"Modal-body"},m("p",null,"Please select one or more tags that are considered blog tags."," ",m("a",{href:app.forum.attribute("baseUrl")+"/blog",target:"_blank"},"Visit your blog.")),m("table",{className:"FlarumBlog-TagsTable"},m("thead",null,m("th",{width:"35"}),m("th",null,"Tag name"),m("th",{width:"50"})),m("tbody",null,0===app.store.all("tags").length&&m("tr",null,m("td",{colspan:"3"},"You currently have no tags.")),app.store.all("tags").map((function(e){if(!e.parent()){var a=function(){var a=t.blogCategories.indexOf(e.id());t.hasChanges=!0,a>=0?t.blogCategories.splice(a,1):t.blogCategories.push(e.id())};return m("tr",null,m("td",null,m("i",{className:e.icon()})),m("td",{onclick:a},e.name()),m("td",null,m(w.a,{state:t.blogCategories.indexOf(e.id())>=0,onchange:a})))}}))))),m("div",{style:"padding: 25px 30px; text-align: center;"},m(v.a,{type:"submit",className:"Button Button--primary",loading:this.loading},this.hasChanges?"Save changes":"Close")))},a.onsubmit=function(t){var e=this;t.preventDefault(),this.hasChanges?(this.isSaving=!0,b()({blog_tags:this.blogCategories.join("|")}).then((function(){app.alerts.show(f.a,{type:"success"},app.translator.trans("core.admin.settings.saved_message")),e.hide()})).catch((function(){app.alerts.show(f.a,{type:"error"},app.translator.trans("core.lib.error.generic_message"))})).then((function(){e.isSaving=!1}))):this.hide()},e}(a.n(N).a),P=a(48),E=a.n(P),S=function(t){function e(){return t.apply(this,arguments)||this}Object(i.a)(e,t);var a=e.prototype;return a.oninit=function(e){var a,n,s,o,r,l,i,d,m;t.prototype.oninit.call(this,e),this.hasChanges=!1,this.isSaving=!1,this.redirectsEnabled=null!=(a=c.a.data.settings.blog_redirects_enabled)?a:"both",this.hideTagsInList=null==(n=c.a.data.settings.blog_hide_tags)||n,this.allowComments=null==(s=c.a.data.settings.blog_allow_comments)||s,this.hideOnDiscussionList=null!=(o=c.a.data.settings.blog_filter_discussion_list)&&o,this.requiresReviewOnPost=null!=(r=c.a.data.settings.blog_requires_review)&&r,this.addCategoryHierarchy=null==(l=c.a.data.settings.blog_category_hierarchy)||l,this.addSidebarNav=null==(i=c.a.data.settings.blog_add_sidebar_nav)||i,this.featuredCount=null!=(d=c.a.data.settings.blog_featured_count)?d:3,this.blogAddHero=null==(m=c.a.data.settings.blog_add_hero)||m,c.a.forum.data.attributes.blog_default_imageUrl=c.a.forum.attribute("baseUrl")+"/assets/"+c.a.data.settings.blog_default_image_path},a.content=function(){var t=this,e=c.a.data.settings.blog_tags?c.a.data.settings.blog_tags.split("|").length:0;return m("div",{className:"BasicsPage FlarumBlog"},m("div",{className:"container"},m("div",{className:"FlarumBlog-SelectCategories"},0===e?c.a.translator.trans("v17development-flarum-blog.admin.settings.no_categories_selected"):c.a.translator.trans("v17development-flarum-blog.admin.settings.selected_category_count",{count:e}),m(v.a,{className:"Button",onclick:function(){return c.a.modal.show(O)}},c.a.translator.trans("v17development-flarum-blog.admin.settings.select_categories_button"))),x.a.component({label:c.a.translator.trans("v17development-flarum-blog.admin.settings.blog_heading")},[w.a.component({state:1==this.allowComments,onchange:function(e){t.allowComments=e,t.hasChanges=!0}},[m("b",null,c.a.translator.trans("v17development-flarum-blog.admin.settings.allow_comments_label")),m("div",{className:"helpText"},c.a.translator.trans("v17development-flarum-blog.admin.settings.allow_comments_text"))]),w.a.component({state:1==this.requiresReviewOnPost,onchange:function(e){t.requiresReviewOnPost=e,t.hasChanges=!0}},[m("b",null,c.a.translator.trans("v17development-flarum-blog.admin.settings.require_review_label")),m("div",{className:"helpText"},c.a.translator.trans("v17development-flarum-blog.admin.settings.require_review_text"))]),w.a.component({state:1==this.hideOnDiscussionList,onchange:function(e){t.hideOnDiscussionList=e,t.hasChanges=!0}},[m("b",null,c.a.translator.trans("v17development-flarum-blog.admin.settings.hide_on_discussion_list_label")),m("div",{className:"helpText"},c.a.translator.trans("v17development-flarum-blog.admin.settings.hide_on_discussion_list_text"))]),w.a.component({state:1==this.addSidebarNav,onchange:function(e){t.addSidebarNav=e,t.hasChanges=!0}},[m("b",null,c.a.translator.trans("v17development-flarum-blog.admin.settings.add_sidebar_nav_label")),m("div",{className:"helpText"},c.a.translator.trans("v17development-flarum-blog.admin.settings.add_sidebar_nav_text"))]),w.a.component({state:1==this.blogAddHero,onchange:function(e){t.blogAddHero=e,t.hasChanges=!0}},[m("b",null,c.a.translator.trans("v17development-flarum-blog.admin.settings.add_hero_label")),m("div",{className:"helpText"},c.a.translator.trans("v17development-flarum-blog.admin.settings.add_hero_text"))]),m("div",{className:"Form-group"},m("label",null,c.a.translator.trans("v17development-flarum-blog.admin.settings.featured_count_label")),m("div",{className:"helpText"},c.a.translator.trans("v17development-flarum-blog.admin.settings.featured_count_text")),m("input",{class:"FormControl",value:this.featuredCount,oninput:function(e){t.featuredCount=e.target.value,t.hasChanges=!0},placeholder:"3",type:"number"}))]),x.a.component({label:c.a.translator.trans("v17development-flarum-blog.admin.settings.categories_heading")},[w.a.component({state:1==this.hideTagsInList,onchange:function(e){t.hideTagsInList=e,t.hasChanges=!0}},[m("b",null,c.a.translator.trans("v17development-flarum-blog.admin.settings.hide_tags_in_taglist_label")),m("div",{className:"helpText"},c.a.translator.trans("v17development-flarum-blog.admin.settings.hide_tags_in_taglist_text"))]),w.a.component({state:1==this.addCategoryHierarchy,onchange:function(e){t.addCategoryHierarchy=e,t.hasChanges=!0}},[m("b",null,c.a.translator.trans("v17development-flarum-blog.admin.settings.show_tag_hierarchy_label")),m("div",{className:"helpText"},c.a.translator.trans("v17development-flarum-blog.admin.settings.show_tag_hierarchy_text"))])]),x.a.component({label:c.a.translator.trans("v17development-flarum-blog.admin.settings.redirects_heading")},[w.a.component({state:"both"===this.redirectsEnabled||"discussions_only"===this.redirectsEnabled,onchange:function(e){e?"tags_only"===t.redirectsEnabled?t.redirectsEnabled="both":"none"===t.redirectsEnabled&&(t.redirectsEnabled="discussions_only"):"discussions_only"===t.redirectsEnabled?t.redirectsEnabled="none":t.redirectsEnabled="tags_only",t.hasChanges=!0}},[m("b",null,c.a.translator.trans("v17development-flarum-blog.admin.settings.redirect_articles_label")),m("div",{className:"helpText"},c.a.translator.trans("v17development-flarum-blog.admin.settings.redirect_articles_text"))]),w.a.component({state:"both"===this.redirectsEnabled||"tags_only"===this.redirectsEnabled,onchange:function(e){e?"discussions_only"===t.redirectsEnabled?t.redirectsEnabled="both":"none"===t.redirectsEnabled&&(t.redirectsEnabled="tags_only"):"tags_only"===t.redirectsEnabled?t.redirectsEnabled="none":t.redirectsEnabled="discussions_only",t.hasChanges=!0}},[m("b",null,c.a.translator.trans("v17development-flarum-blog.admin.settings.redirect_tags_label")),m("div",{className:"helpText"},c.a.translator.trans("v17development-flarum-blog.admin.settings.redirect_tags_text"))])]),x.a.component({label:c.a.translator.trans("v17development-flarum-blog.admin.settings.default_article_image_label")},[m("div",{className:"helpText"},c.a.translator.trans("v17development-flarum-blog.admin.settings.default_article_image_text")),E.a.component({name:"blog_default_image"})]),m(v.a,{loading:this.isSaving,className:"Button Button--primary",onclick:function(){return t.save()},disabled:!this.hasChanges},c.a.translator.trans("core.admin.settings.submit_button"))))},a.save=function(){var t=this;this.isSaving=!0,b()({blog_add_sidebar_nav:this.addSidebarNav,blog_redirects_enabled:this.redirectsEnabled,blog_hide_tags:this.hideTagsInList,blog_requires_review:this.requiresReviewOnPost,blog_allow_comments:this.allowComments,blog_category_hierarchy:this.addCategoryHierarchy,blog_filter_discussion_list:this.hideOnDiscussionList,blog_featured_count:this.featuredCount,blog_add_hero:this.blogAddHero}).then((function(){t.hasChanges=!1,c.a.alerts.show(f.a,{type:"success"},c.a.translator.trans("core.admin.settings.saved_message"))})).catch((function(){})).then((function(){t.isSaving=!1,m.redraw()}))},e}(u.a);app.initializers.add("v17development-flarum-blog",(function(){app.extensionData.for("v17development-blog").registerPage(S),app.extensionData.for("v17development-blog").registerPermission({icon:"fas fa-pencil-alt",label:app.translator.trans("v17development-flarum-blog.admin.permissions.write_articles"),permission:"blog.writeArticles"},"blog",90).registerPermission({icon:"far fa-star",label:app.translator.trans("v17development-flarum-blog.admin.permissions.auto_approve_posts"),permission:"blog.autoApprovePosts"},"blog",90).registerPermission({icon:"far fa-thumbs-up",label:app.translator.trans("v17development-flarum-blog.admin.permissions.approve_posts"),permission:"blog.canApprovePosts"},"blog",90),Object(n.extend)(l.a.prototype,"permissionItems",(function(t){t.add("blog",{label:app.translator.trans("v17development-flarum-blog.admin.blog"),children:this.attrs.extensionId?app.extensionData.getExtensionPermissions(this.extensionId,"blog").toArray():app.extensionData.getAllExtensionPermissions("blog").toArray()},80)})),Object(n.extend)(o.a.prototype,"homePageItems",(function(t){t.add("blog",{path:"/blog",label:app.translator.trans("v17development-flarum-blog.admin.blog")})}))}))},7:function(t,e){t.exports=flarum.core.compat["common/extend"]},8:function(t,e){t.exports=flarum.core.compat["common/components/Switch"]}});
//# sourceMappingURL=admin.js.map